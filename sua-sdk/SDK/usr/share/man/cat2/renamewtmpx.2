renamewtmpx(2)                                           renamewtmpx(2)

  rreennaammeewwttmmppxx(())

  NNAAMMEE

    renamewtmpx(), wcs_renamewtmpx() - rename current wtmpx file and start new
    one

  SSYYNNOOPPSSIISS

    #include <utmpx.h>

    int renamewtmpx (const char *newname)
    int wcs_renamewtmpx (const wchar_t *newname)

  DDEESSCCRRIIPPTTIIOONN

    The rreennaammeewwttmmppxx(2) and wwccss__rreennaammeewwttmmppxx(2) functions are identical, except
    that wwccss__rreennaammeewwttmmppxx(2) accepts wide characters in the newname argument.

    The rreennaammeewwttmmppxx(2) and wwccss__rreennaammeewwttmmppxx(2) functions rename the file //vvaarr//
    aaddmm//wwttmmppxx to newname.

    This ensures that the current wwttmmppxx file is renamed and that a new wwttmmppxx
    file is started in its place, and that no data is lost during the renaming
    process.

    Failure to use this interface means that data continues to be sent to the
    original file, even under a new name.

  RREETTUURRNN VVAALLUUEESS

    The rreennaammeewwttmmppxx(2) or wwccss__rreennaammeewwttmmppxx(2) function returns 0 on success; on
    failure, it returns -1 and sets the global variable errno.

  EERRRROORRSS

    [EACCES]
        A component of either path prefix denies search permission.

    [EACCES]
        The requested link requires writing in a directory with a mode that
        denies write permission.

    [EEXIST]
        The file newname already exists.

    [EFAULT]
        Newname points outside the process's allocated address space.

    [EINVAL]
        Either pathname contains a character with the high-order bit set, or
        the device holding one or both of the files does not permit the
        operation.

    [EIO]
        An I/O error occurred while making or updating a directory entry.

    [ENAMETOOLONG]
        The newname exceeds {NAME_MAX} characters.

    [ENOENT]
        A path prefix of newname does not exist.

    [ENOSPC]
        The directory in which the entry for the new name is being placed
        cannot be extended because there is no space left on the file system
        containing the directory.

    [ENOTDIR]
        A component of newname's path prefix is not a directory.

    [EPERM]
        The newname file exists, the directory containing newname is marked
        sticky, and neither the containing directory nor newname are owned by
        the effective user ID.

    [EROFS]
        The requested link requires writing in a directory on a read-only file
        system.

    [EXDEV]
        The file cannot be moved or renamed to different file system (for
        example, //ddeevv//ffss//CC//ddoogg to //ddeevv//ffss//DD//ddoogg).

  SSEEEE AALLSSOO

    _m_v_w_t_m_p_x(1)

    _r_e_n_a_m_e(2)

  UUSSAAGGEE NNOOTTEESS

    All of these functions are thread safe.

    None of these functions are async-signal safe.

