msgrcv(2)                                                     msgrcv(2)

  mmssggrrccvv(())

  NNAAMMEE

    msgrcv() - read message from a message queue

  SSYYNNOOPPSSIISS

    #include <sys/msg.h>

    int msgrcv (int msqid, void *msgp, size_t msgsz,
               long int msgtyp, int msgflg);

  DDEESSCCRRIIPPTTIIOONN

    The _mm_ss_gg_rr_cc_vv(2) function retrieves a message from the queue associated with
    the identifier msqid. The message is stored in a user-defined structure
    indicated by msgp (see _mm_ss_gg_ss_nn_dd(2)) and is of the size specified by msgsz.

    The msgtyp argument specifies the type of message to be received.
    Depending on the value of msgtype, the _mm_ss_gg_rr_cc_vv(2) function searches through
    the queue for messages of the specified type:

    *     If msgtyp is zero (0), the function returns the first message in the
          queue, regardless of its type.
    *     If msgtyp is positive (>0), the function returns the first message
          whose type is the value of msgtyp.
    *     If msgtyp is negative (<0), the function returns the first message
          whose type is less than or equal to the absolute value of msgtyp.

    The msgflg argument describes what is to be done if there is no message of
    the appropriate type in the queue:

  RREETTUURRNN VVAALLUUEE

    On success, the _mm_ss_gg_rr_cc_vv(2) function returns the number of bytes placed into
    the data buffer of the msgp structure. On failure it returns -1 and sets
    errno to indicate the error.

  EERRRROORRSS

    [E2BIG]
        The message text is larger than msgsz and the MSG_NOERROR flag has not
        been set (that is, (msgflg is zero).

    [EACCES]
        The calling process does not have permission to perform that
        operation.

    [EIDRM]
        The message queue identifier msqid has been removed from the system.

    [EINTR]
        The function was interrupted by a signal.

    [EINVAL]
        The msqid is not a valid message queue identifier or msgsz is less
        than 0.

    [ENOMSG]
        There is no message of the desired type in the queue and the
        IPC_NOWAIT bit is set (that is, (msgflg is non-zero).

  SSEEEE AALLSSOO

    _m_s_g_c_t_l(2)

    _m_s_g_g_e_t(2)

    _m_s_g_s_n_d(2)

  UUSSAAGGEE NNOOTTEESS

    The mmssggrrccvv function is thread safe.

    The mmssggrrccvv function is not async-signal safe.

