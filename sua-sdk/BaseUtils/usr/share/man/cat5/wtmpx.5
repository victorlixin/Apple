wtmpx(5)                                                       wtmpx(5)

  uuttmmppxx

  NNAAMMEE

    utmpx, wtmpx - login records

  SSYYNNOOPPSSIISS

    #include <utmpx.h>

  DDEESSCCRRIIPPTTIIOONN

    The file <<uuttmmppxx..hh>> declares the structures used to record information
    about current users in the file uuttmmppxx, and logins and logouts in the file
    wwttmmppxx, and last logins in the file llaassttlloogg. The time stamps of date
    changes, shutdowns, and reboots are also logged in the wwttmmppxx file.

    These files can grow rapidly on busy systems; daily or weekly rotation is
    recommended. If any of these files does not exist, it is not created.

    #define _PATH_UTMP      "/var/adm/utmpx"
    #define _PATH_WTMP      "/var/adm/wtmpx"

    #define UT_NAMESIZE     128 /* format "domain+user" */
    #define UT_LINESIZE     32  /* for tty names */
    #define UT_HOSTSIZE     128 /* for longer FQDN's */
    #define UT_IDSIZE       UT_LINESIZE
    struct utmpx {
            char    ut_line[UT_LINESIZE];
            char    ut_user[UT_NAMESIZE];
            char    ut_host[UT_HOSTSIZE];
            struct timeval ut_tv;
            pid_t   ut_pid;
            uid_t   ut_uid;            /* Real uid of user process */
            char    ut_id[UT_IDSIZE];  /* Repeats ut_line */
            short   ut_type;           /* Type of entry; see macros above */
            struct exit_status ut_exit;  /* DEAD_PROCESS exit information */
    };

    The llooggiinn(1) program opens the file uuttmmppxx and inserts the uuttmmppxx record for
    the user. This record remains there until the user logs out, at which time
    it is deleted. The uuttmmppxx file is used by wwhhoo(1).

    Next, the llooggiinn(1) program opens the file wwttmmppxx, and appends the user's
    uuttmmppxx record. The same uuttmmppxx record, with an updated time stamp is later
    appended to the file when the user logs out. The wwttmmppxx file is used by the
    program llaasstt(1).

    In the event of a date change, a shutdown, or a reboot, the following
    items are logged in the wwttmmppxx file:

    reboot

    shutdown
        A system reboot or shutdown has been initiated. The character ~~ is
        placed in the field ut_line, and or in the field ut_name.

    date
        The system time has been manually or automatically updated. (See
        ddaattee(1).) The command name ddaattee(1) is recorded in the field ut_name.
        In the field ut_line, the character || indicates the time prior to the
        change, and the character {{ indicates the new time.

  FFIILLEESS

    //vvaarr//aaddmm//uuttmmppxx
        The uuttmmppxx file.

    //vvaarr//aaddmm//wwttmmppxx
        The wwttmmppxx file.

    //vvaarr//lloogg//llaassttlloogg
        The llaassttlloogg file.

  SSEEEE AALLSSOO

    _l_a_s_t(1)

    _l_o_g_i_n(1)

    _w_h_o(1)

