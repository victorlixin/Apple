

Interface(4dsp)                                   Interface(4dsp)

DDeessccrriippttiioonn
       The  files in $ROOT/$MACH/etc/conf/interface.d are Instal-
       lable Driver/Tunable Parameters kernel configuration files
       that  contain  specifications of interfaces and their sym-
       bols which can be referenced from  installed  kernel  mod-
       ules.   These  interface files allow for remapping symbols
       to alternate symbols, thereby  facilitating  compatibility
       support for old interfaces.

       The  name  of  each file determines the interface name and
       version that it describes.  The filenames must be  in  the
       following form: name.version

       The  command  uses these files to determine which symbols,
       if any, in the Driver.o files should be remapped  to  dif-
       ferent  symbol names before linking.  The command uses the
       set of $interface lines in a module's  file  to  determine
       which  Interface files to use.  The module is not accepted
       if it references symbols not  covered  by  its  $interface
       lines.

       Interface checking is done at idbuild time for static mod-
       ules and at load time for loadable modules.

       Each interface file  contains  lines  with  the  following
       whitespace-separated fields: symbol-name new-symbol-name

       The  new-symbol-name  field  is  optional.  If present, it
       specifies the alternate symbol to use in place of  symbol-
       name.

       If  the  same  symbol-name  appears on multiple lines, the
       last one is used.  The special new-symbol-name,  $dropped,
       can  be  used  to  drop a previouslylisted symbol from the
       interface.  This is most useful with $replace.

       The following special lines also can appear  in  Interface
       files:  $replace  version $depend module-name-list $entry-
       type type

       The description of each line follows: Specifies that  this
       interface  is  based  on  a previous version with the same
       name.  This acts as if the corresponding name.version file
       were  directly  included  at  this point.  Also, it estab-
       lishes an ordering between versions of an interface.  This
       ordering  is used by when converting old Master files that
       do not have $interface lines, if  symbols  match  multiple
       interface  versions.  In this case, the ``oldest'' version
       is used.  Specifies the kernel modules that implement  the
       interface.   These  modules are loaded automatically when-
       ever a module that uses this interface is loaded.   Speci-
       fies  the  entry-point model for the modules that use this
       interface.  Newer interfaces use entry-type 1, which  uses
       exactly  two global entry-point routines, named and Entry-

                                                                1

Interface(4dsp)                                   Interface(4dsp)

       type 1 modules are dynamically loadable  by  default,  and
       always  have  their  entry-point routine called, even when
       linked statically into the base kernel.

       Entry-type 0 modules use named entry points, identified by
       $entry  lines  in the Master files.  The define the $entry
       values used to identify each  named  entry  point  routine
       used  with  DDI  versions prior to version 8.  Named entry
       point names are constructed by prepending  a  module's  to
       the standard entry-point suffix.  Entry-type 0 modules are
       only dynamically loadable if they  contain  an  L  in  the
       characteristics  field  of  their  files  and they use the
       appropriate MOD_xxx_WRAPPER macros.   When  linked  stati-
       cally  into  the  base kernel, their (optional) and entry-
       point routines are called instead of

       $entrytype lines  apply  only  to  the  Interface  file(s)
       directly referenced by $interface lines in a module's Mas-
       ter file; they are not inherited by $replace.  If none  of
       the  directly-referenced  files contain a $entrytype line,
       entry-type 0 is assumed.

RReeffeerreenncceess

                                                                2

