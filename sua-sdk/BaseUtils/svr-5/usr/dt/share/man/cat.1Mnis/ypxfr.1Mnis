

ypxfr(1Mnis)                                         ypxfr(1Mnis)

SSyynnooppssiiss
       /usr/sbin/ypxfr [-c] [-f] [-d ypdomain] [-h host]
            [-s ypdomain] [-C tid prog server] mapname

DDeessccrriippttiioonn
       The  ypxfr  command  moves  an Network Information Service
       (NIS) map in the default domain for the local host to  the
       local host by making use of normal NIS services.

   OOppttiioonnss
       ypxfr  takes  the following options: Do not send a ``Clear
       current map'' request to the local  ypserv  process.   Use
       this flag if ypserv is not running locally at the time you
       are running ypxfr.  Otherwise,  ypxfr  complains  that  it
       cannot  talk  to the local ypserv, and the transfer fails.
       Force the transfer to occur even if  the  version  at  the
       master  is  not  more recent than the local version.  This
       option is used by ypserv only.  When ypserv starts  ypxfr,
       it  specifies that ypxfr should call back a yppush process
       at the host server, registered as program number prog, and
       waiting  for  a  response  to  transaction tid.  Specify a
       domain other than the default domain.  Get  the  map  from
       host,  regardless  of what the map says the master is.  If
       host is not specified, ypxfr asks the NIS service for  the
       name  of  the master, and tries to get the map from there.
       host must be a name.  Specify a source domain  from  which
       to  transfer a map that should be the same across domains.

   FFiilleess
       log file list of maps transferred by  script  to  run  one
       transfer  per  day script for hourly transfers of volatile
       maps NIS domain the crontab file of the NIS  administrator
       root with the appropriate privileges

UUssaaggee
       ypxfr   creates   a   temporary   map   in  the  directory
       /var/yp/ypdomain (this directory must already exist; ypdo-
       main  is  the default domain for the local host), fills it
       by enumerating the map's entries, fetches the map  parame-
       ters  (master  and  order  number), and loads them.  ypxfr
       then deletes any old versions of the  map  and  moves  the
       temporary map to the real mapname.

       If  run interactively, ypxfr writes its output to the ter-
       minal.  However, if it is started  without  a  controlling
       terminal,  and  if  the log file /var/yp/ypxfr.log exists,
       ypxfr appends all its output to that file.  ypxfr is  most
       often  run  from the crontab file of the NIS administrator
       with the appropriate privileges, or by  ypserv.   The  log
       file can be used to retain a record of what was attempted,
       and what the results were.

       For consistency between servers, ypxfr should be run peri-
       odically  for  every  map  in the NIS database.  Different

                                                                1

ypxfr(1Mnis)                                         ypxfr(1Mnis)

       maps change at different rates: a map may not  change  for
       months  at  a  time,  for  instance,  and may therefore be
       checked only once a day.  Some  maps  may  change  several
       times  per  day.   In  such  a case, you may want to check
       hourly for updates.  A entry can be used to perform  peri-
       odic updates automatically.  Rather than having a separate
       crontab entry for each map,  you  can  group  commands  to
       update several maps in a shell script.  Examples (mnemoni-
       cally  named)  are  in  /usr/sbin/yp:  ypxfr_1perday,  and
       ypxfr_1perhour.   They can serve as reasonable first cuts.

       On  a  slave  server,  see  the  contents  of   the   file
       /var/yp/YPMAPS  for  a  list of maps that it obtained from
       the master server when it was first initialized using

       Refer to and for an overview of the NIS service.

RReeffeerreenncceess

                                                                2

