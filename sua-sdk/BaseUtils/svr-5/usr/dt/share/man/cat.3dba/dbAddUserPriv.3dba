

dbAddUserPriv(3dba)                           dbAddUserPriv(3dba)

SSyynnooppssiiss
       cc  [flag  ...]  file  ...   -kthread -leels [library] ...
       #include <eelsdba.h>

       int dbAddUserPriv( char *host,      char *user,       char
       *passwd,      unsigned int privs );

DDeessccrriippttiioonn
       dbAddUserPriv  grants a user access to all EELS databases.
       If a any user has been granted privileges  to  a  database
       using  then  privileges  granted using this routine to not
       apply to that database. That is, privileges granted  on  a
       per  database  basis using dbAddDbPriv override privileges
       added using dbAddUsePriv.

       When a application connects to a database using the  user-
       name  is  sent  to the database server for authentication.
       In the case of mySQL this is the login  user  name.  If  a
       user  logs  into  a  machine and uses to log in as another
       user, the username that the user used  to  login  will  be
       sent  to  the  database  server. So this should be kept in
       mind when diagnosing problems with database privileges.

       A user can be granted a number of privileges to  the  EELS
       databases.  Privileges  are  passed to this routine in the
       form of a bitmask.  The  bitmask  is  made  up  by  OR'ing
       together  one or more of the privilege bits defined in the
       table below.
       -----------------------------------------------------------
       Value          Description
       -----------------------------------------------------------
       DB_SELECT_PRIV Allow records to be read from a database
       DB_INSERT_PRIV Allow records to be written to a database
       DB_UPDATE_PRIV Allow records to be modified in a database.
       DB_DELETE_PRIV Allow records to be deleted from a database
       DB_CREATE_PRIV Allow tables to be created in a database
       DB_DROP_PRIV   Allow tables to be dropped from a database
       If a user is going to  be  given  privileges  to  add  and
       delete tables from a database (that is, DB_CREATE_PRIV and
       DB_DROP_PRIV), then the user  also  needs  to  be  granted
       access  to  the EELS administrative database.  This can be
       done by using dbAddDbPriv to grant the user access to  the
       EELS_Admin database. For example, to grant user foo access
       to the EELS_Admin database call  dbAddDbPriv  as  follows:
       dbAddDbPriv("localhost",                            "foo",
                     "EELS_Admin",
                     DB_SELECT_PRIV|DB_INSERT_PRIV|DB_DELETE_PRIV);
       This enables  user  foo  to  select,  insert,  and  delete
       records  from  the EELS_Admin databases. This is necessary
       because  routines  such  as  and  modify  the   EELS_Admin
       database.

       The  word  any is used as a wildcard, and can be specified
       in the  user or host fields.

                                                                1

dbAddUserPriv(3dba)                           dbAddUserPriv(3dba)

   AArrgguummeennttss
       (Input) IP/Hostname from which the user is  connecting  to
       the  database  (Input)  The name of the user that is being
       granted database privileges.  (Input) Not currently  used,
       and  should  be  NULL  (Input) Bitmask defining privileges
       granted to the user.

RReettuurrnn vvaalluueess
       dbAddUserPriv returns  0  if  successful.   Otherwise,  it
       returns -1.

RReeffeerreenncceess

                                                                2

