

ftpconversions(4tcp)                         ftpconversions(4tcp)

DDeessccrriippttiioonn
       The  conversions  known by and their attributes are stored
       in an ASCII file  that  is  structured  as  follows:  str-
       pre:strpos:addpre:addpos:extcom:types:options:desc    Each
       line in the file provides a description for a single  con-
       version.   The  colon-separated  fields have the following
       meanings: strip prefix strip postfix  addon  prefix  addon
       postfix external command types options description

   PPrreeffiixx aanndd ppoossttffiixx
       The  prefix fields are not currently supported.  The post-
       fix fields define extensions to be added or  removed  from
       user-specified  filenames.   The  addon  postfix  field is
       assumed to have been appended to a real  filename  and  is
       removed  prior  to looking up the file.  The strip postfix
       field is appended to  the  user-supplied  filename  before
       looking up the file.

       The  filename  that  results  is  available for use in the
       external command field by using the magic cookie ``%s''.

   EExxtteerrnnaall ccoommmmaanndd
       The external command must be specified using  an  absolute
       pathname.   For  anonymous users to be able to execute the
       command, it must be present in the home directory  hierar-
       chy of the anonymous user.

   TTyyppeess
       The following types are defined: allow ASCII transfer of a
       file resulting from a conversion allow directories  to  be
       converted  allow regular files to be converted These types
       may be used prevent the transfer of  compressed  files  in
       ASCII mode or attempts to compress directories.

       More  than  one  type  may be specified by separating them
       with the | character.

   OOppttiioonnss
       The following built-in options are known to the FTP server
       and  will cause special information to be displayed in the
       FTP server log file (see if transfers  are  being  logged.
       These  are:  file  was compressed during transfer file was
       tar'ed during transfer file was uncompressed during trans-
       fer  More  than one option may be specified by using the |
       character to separate the options.

   EExxaammpplleess
       The following example shows a conversion that causes files
       whose names end in .tar to have their suffix removed.  The
       resulting filename is used as an argument to the  command.
       The  transfer is not allowed to be performed in ASCII mode
       (T_ASCII is not specified) and a special ``TAR'' flag will
       be written to the transfer log.
        :   :   :.tar:/usr/bin/tar -cf - %s:T_REG|T_DIR:O_TAR:TAR

                                                                1

ftpconversions(4tcp)                         ftpconversions(4tcp)

       Operations other than archival and compression are  possi-
       ble.   The next example shows a conversion that causes the
       contents of a file whose name ends with the extension .txt
       to  be  converted from code set 88591 to PC850.  This pro-
       duces a file with the same name  but  with  the  extension
       .850 instead of .txt.  Note that this transfer is also not
       allowed to be performed in ASCII mode.
        :.txt:   :.850:/usr/bin/iconv   -f   88591    -t    PC850
       %s:T_REG:O_COMPRESS:ICONV

FFiilleess
       /etc/ftpconversions

RReeffeerreenncceess

                                                                2

