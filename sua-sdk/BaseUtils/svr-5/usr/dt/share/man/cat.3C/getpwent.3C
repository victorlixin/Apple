

getpwent(3C)                                         getpwent(3C)

SSyynnooppssiiss
       #include <sys/types.h> #include <pwd.h> #include <stdio.h>

       struct passwd *getpwent (void);

       struct passwd *getpwuid (uid_t uid);

       int  getpwuid_r(uid_t  uid,  struct  passwd   *pwd,   char
       *buffer,
                  size_t bufsize, struct passwd **result);

       struct passwd *getpwnam (const char *name);

       int  getpwnam_r(const  char *nam, struct passwd *pwd, char
       *buffer,
                  size_t bufsize, struct passwd **result);

       void setpwent (void);

       void endpwent (void);

       struct passwd *fgetpwent (FILE *f);

DDeessccrriippttiioonn
       getpwent, getpwuid, and getpwnam each returns a pointer to
       an object with the following structure containing the bro-
       ken-out fields of a line in the  /etc/passwd  file.   Each
       line  in the file contains a passwd structure, declared in
       the pwd.h header file: struct passwd {      char *pw_name;
            char *pw_passwd;                    uid_t     pw_uid;
            gid_t     pw_gid;                       char *pw_age;
            char *pw_comment;                     char *pw_gecos;
            char *pw_dir;      char *pw_shell; };

       When first called, getpwent returns a pointer to the first
       passwd  structure  in  the  file; thereafter, it returns a
       pointer to the next passwd structure in  the  file.   Thus
       successive calls can be used to search the entire file.

       getpwuid  searches  from the beginning of the file until a
       numerical user ID matching uid  is  found  and  returns  a
       pointer to the particular structure in which it was found.

       getpwuid_r updates the passwd structure pointed to by  pwd
       and  stores  a  pointer  to that structure at the location
       pointed to by result.  The structure will contain an entry
       from  the user database with a matching uid.  Storage ref-
       erenced by the structure is allocated from the memory pro-
       vided  with the buffer parameter, which is bufsize charac-
       ters in size.  A NULL pointer is returned at the  location
       pointed to by result on error or if the requested entry is
       not found.

       getpwnam searches from the beginning of the file  until  a

                                                                1

getpwent(3C)                                         getpwent(3C)

       login  name  matching name is found, and returns a pointer
       to the particular structure in which it was found.  If  an
       end-of-file  or  an error is encountered on reading, these
       functions return a null pointer.

       getpwnam_r updates the passwd structure pointed to by  pwd
       and  stores  a  pointer  to that structure at the location
       pointed to by result.  The structure will contain an entry
       from the user database with a matching name.  Storage ref-
       erenced by the structure is allocated from the memory pro-
       vided  with the buffer parameter, which is bufsize charac-
       ters in size.  A NULL pointer is returned at the  location
       pointed to by result on error or if the requested entry is
       not found.

       A call to setpwent has the effect of rewinding  the  pass-
       word  file  to  allow  repeated searches.  endpwent may be
       called to close the password file when processing is  com-
       plete.

       fgetpwent  returns  a pointer to the next passwd structure
       in the stream f, which matches the format of  /etc/passwd.

   FFiilleess
       /etc/passwd
       /var/yp/domainame/passwd.byname
       /var/yp/domainame/passwd.byuid

RReettuurrnn vvaalluueess
       getpwent,  getpwuid, getpwnam, and fgetpwent return a null
       pointer on EOF or error.

       getpwuid_r and getpwnam_r return zero on success.   Other-
       wise, an error number is returned to indicate the error.

DDiiaaggnnoossttiiccss
       getpwuid_r  and  getpwnam_r  return the following value if
       the  corresponding  condition  is  detected:  Insufficient
       storage was supplied via buffer and bufsize to contain the
       data to be referenced by the resulting passwd structure.

SSttaannddaarrddss CCoommpplliiaannccee
       The Single UNIX Specification, Version 2; The Open  Group.

RReeffeerreenncceess
NNoottiicceess
       For  getpwent, getpwuid, getpwnam, setpwent, endpwent, and
       fgetpwent, all information is contained in a static  area,
       so it must be copied if it is to be saved.

       Passwd  structures  will  be  obtained  from NIS, when the
       dynamic versions of these routines are  used  and  NIS  is
       installed and running. See for the formats of NIS entries.

                                                                2

