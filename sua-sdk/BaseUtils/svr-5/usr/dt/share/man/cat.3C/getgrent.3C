

getgrent(3C)                                         getgrent(3C)

SSyynnooppssiiss
       #include <sys/types.h> #include <grp.h>

       struct group *getgrent(void);

       struct group *getgrgid(gid_t gid);

       int getgrgid_r(gid_t gid, struct group *grp, char *buffer,
            size_t bufsize, struct group **result);

       struct group *getgrnam(const char *name);

       int getgrnam_r(const char *name, struct group  *grp,  char
       *buffer,      size_t bufsize, struct group **result);

       void setgrent(void);

       void endgrent(void);

       struct group *fgetgrent(FILE *f);

DDeessccrriippttiioonn
       getgrent, getgrgid, and getgrnam each returns a pointer to
       a structure containing the broken-out fields of a line  in
       the  /etc/group  file.   Each  line  contains  a ``group''
       structure, defined in the grp.h header file with the  fol-
       lowing  members:  char     *gr_name;    /* the name of the
       group */ char      *gr_passwd;   /*  the  encrypted  group
       password  */  gid_t     gr_gid;     /* the numerical group
       ID */ char    **gr_mem;    /* vector of pointers to member
       names */

       When first called, getgrent returns a pointer to the first
       group structure in the  file;  thereafter,  it  returns  a
       pointer  to the next group structure in the file; so, suc-
       cessive calls may be used to search the entire file.

       getgrgid searches from the beginning of the file  until  a
       numerical  group  id  matching  gid is found and returns a
       pointer to the particular structure in which it was found.

       getgrgid_r  updates  the group structure pointed to by grp
       and stores a pointer to that  structure  at  the  location
       pointed  to  by  result.   The structure contains an entry
       from the group database with a matching gid.  Storage ref-
       erenced  by the group structure is allocated from the mem-
       ory provided with the buffer parameter, which  is  bufsize
       characters  in  size.   A  NULL pointer is returned at the
       location pointed to by result on error or if the requested
       entry is not found.

       getgrnam  searches  from the beginning of the file until a
       group name matching name is found and returns a pointer to
       the  particular  structure  in  which it was found.  If an

                                                                1

getgrent(3C)                                         getgrent(3C)

       end-of-file or an error is encountered on  reading,  these
       functions return a null pointer.

       getgrnam_r  updates  the group structure pointed to by grp
       and stores a pointer to that  structure  at  the  location
       pointed  to  by  result.   The structure contains an entry
       from the group database with  a  matching  name.   Storage
       referenced  by  the  group structure is allocated from the
       memory provided with the buffer parameter, which  is  buf-
       size  characters  in  size.  A NULL pointer is returned at
       the location pointed to by  result  on  error  or  if  the
       requested entry is not found.

       A  call  to setgrent has the effect of rewinding the group
       file to allow repeated searches.  endgrent may  be  called
       to close the group file when processing is complete.

       fgetgrent returns a pointer to the next group structure in
       the stream f, which matches the format of /etc/group.

       When used by a multithreaded program, each distinct thread
       will  have  its  own group structure and, except for fget-
       grent, its own underlaying file descriptor.

   FFiilleess
       /etc/group                  /var/yp/domainame/group.byname
       /var/yp/domainame/group.bygid

RReettuurrnn VVaalluueess
       getgrent,  getgrgid, getgrnam, and fgetgrent return a null
       pointer on EOF or error.

       getgrgid_r and getgrnam_r return zero on success.   Other-
       wise, an error number is returned to indicate the error.

DDiiaaggnnoossttiiccss
       getgrent,  getgrgid,  getgrnam,  fgetgrent,  setgrent, and
       endgrent return the following values if the  corresponding
       conditions  are  detected:  sufficient space for the entry
       cannot be allocated.

       getgrgid_r and getgrnam_r return the following  values  if
       the  corresponding  conditions  are detected: Insufficient
       storage was supplied via buffer and bufsize to contain the
       data to be referenced by the resulting group structure.

SSttaannddaarrddss CCoommpplliiaannccee
       The  Single UNIX Specification, Version 2; The Open Group.

RReeffeerreenncceess
NNoottiicceess
       For getgrent, getgrgid, getgrnam, setgrent, endgrent,  and
       fgetgrent  all  information is contained in a static area,
       so it must be copied if it is to be saved.

                                                                2

getgrent(3C)                                         getgrent(3C)

       Group structures will  be  obtained  from  NIS,  when  the
       dynamic  versions of these routines (other than fgetgrent)
       are used and NIS is installed and running.   See  for  the
       formats of NIS entries.

                                                                3

