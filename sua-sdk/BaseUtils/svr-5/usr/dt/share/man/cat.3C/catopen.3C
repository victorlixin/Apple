

catopen(3C)                                           catopen(3C)

SSyynnooppssiiss
       #include <nl_types.h>

       nl_catd catopen(const char *name, int oflag);

       int catclose(nl_catd catd);

DDeessccrriippttiioonn
       catopen  opens  a  message  catalog  and returns a catalog
       descriptor.  name specifies the name of the message  cata-
       log  to  be  opened.   If  name contains a ``/'' then name
       specifies a pathname for the message catalog.   Otherwise,
       the environment variable NLSPATH is used.  If NLSPATH does
       not exist in the environment, or if a message catalog can-
       not  be  opened  in any of the paths specified by NLSPATH,
       then the default path is used [see

       The names of message catalogs, and their location  in  the
       filestore,  can vary from one system to another.  Individ-
       ual applications can choose to name or locate message cat-
       alogs  according  to their own special needs.  A mechanism
       is  therefore  required  to  specify  where  the   catalog
       resides.

       The NLSPATH variable provides both the location of message
       catalogs, in the form of a search  path,  and  the  naming
       conventions  associated  with  message catalog files.  For
       example: NLSPATH=/nlslib/%L/%N.cat:/nlslib/%N/%L

       The metacharacter % introduces a substitution field, where
       %L  substitutes  the  current  setting  of the locale (see
       below) and %N substitutes the value of the name  parameter
       passed  to  catopen.   Thus, in the above example, catopen
       will   search   in   /nlslib/locale/name.cat,   then    in
       /nlslib/name/locale, for the required message catalog.

       The evaluation of locale as referenced by the substitution
       field %L depends on the argument  oflag.   When  oflag  is
       NL_CAT_LOCALE,  the LC_MESSAGES category as returned by is
       used to locate the message catalog.  When oflag  is  zero,
       the  environment variable LANG locates the catalog without
       regard to the LC_MESSAGES category.  If  either  of  these
       methods  fails,  then  the  default language as defined in
       nl_types.h is used.

       For a complete description of the metacharacters available
       for NLSPATH, see

       NLSPATH  will  normally  be  set up on a system wide basis
       (for example, in /etc/profile) and thus makes the location
       and  naming  conventions  associated with message catalogs
       transparent to both programs and users.

       catclose closes the message catalog identified by catd.

                                                                1

catopen(3C)                                           catopen(3C)

   RReettuurrnn vvaalluueess
       If successful, catopen returns a message catalog  descrip-
       tor  for  use in subsequent calls to catgets and catclose.
       Otherwise catopen returns (nl_catd)-1.

       catclose returns zero if successful, otherwise -1.

SSeeccuurriittyy ccoonnssiiddeerraattiioonnss
       For processes that have gained privilege, message catalogs
       without  general  read  permission will not be accepted by
       the localization code.  This prevents malicious users from
       gaining  access to protected system files through interna-
       tionalized system routines.

RReeffeerreenncceess

                                                                2

