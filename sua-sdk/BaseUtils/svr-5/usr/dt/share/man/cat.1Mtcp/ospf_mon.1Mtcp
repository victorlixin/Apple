

ospf_monitor(1Mtcp)                           ospf_monitor(1Mtcp)

SSyynnooppssiiss
       ospf_monitor mon_db_file

DDeessccrriippttiioonn
       Use  the  ospf_monitor command to query OSPF routers.  The
       ospf_monitor command operates  in  interactive  mode.   It
       allows  the user to query the various OSPF routers to pro-
       vide detailed information on IO  statistics,  error  logs,
       link-state  data  bases,  AS external data bases, the OSPF
       routing table, configured OSPF interfaces, and OSPF neigh-
       bors.

       mon_db_file  is  the  complete pathname of a database com-
       posed of records configuring destinations for ospf_monitor
       remote commands.  Each destination record is a single-line
       entry which lists the destination IP address, the destina-
       tion  hostname, and an OSPF authentication key (if authen-
       tication is activated by the destination).  Since  authen-
       tication  keys  may be present in the destination records,
       it is recommended that general access to this database  be
       restricted.   The  recommended pathname for mon_db_file is
       /etc/mon.db.

       Refer to RFC 1583  (OSPF  Specification,  version  2)  for
       details about OSPF database and packet formats.

   CCoommmmaannddss
       Upon  entering interactive mode, ospf_monitor presents the
       prompt [ # ] dest command params > at which you can  enter
       any  of  ospf_monitor's interactive commands.  Interactive
       commands can be interrupted at any  time  via  a  keyboard
       interrupt.  Note that the command line length must be less
       than 200 characters.

   LLooccaall ccoommmmaannddss
       Display all local commands and their  functions.   Display
       all remote commands and their functions.  Display all con-
       figured  destinations.   This  command  displays   ``<dest
       index>'',  the  IP address, and the hostname of all poten-
       tial  ospf_monitor  command  destinations  configured   in
       mon_db_file.   Display  the command history buffer showing
       the last 30 interactive commands.  Exit  the  ospf_monitor
       program.   Send remote_command to the same (previous) des-
       tination.  Send remote_command to  configured  destination
       dest_index.   Send  all  ospf_monitor  output to filename.
       Send all ospf_monitor output to stdout.

   RReemmoottee ccoommmmaannddss
       Display link state advertisement.   area_id  is  the  OSPF
       area  for  which  the  query is directed.  adv_rtr is cur-
       rently unused.  type specifies the type  of  advertisement
       to request and should be specified as follows: Request the
       router links advertisements.  They describe the  collected
       states  of  the  router's  interfaces.   For  this type of

                                                                1

ospf_monitor(1Mtcp)                           ospf_monitor(1Mtcp)

       request, the ls_id field should be set to the  originating
       router's  Router ID.  Request the network links advertise-
       ments.  They describe the set of routers attached  to  the
       network.  For this type of request, the ls_id field should
       be set to the IP interface address of the network's Desig-
       nated  Router.   Request  the  summary link advertisements
       describing routes to networks.  They  describe  inter-area
       routes  and enable the condensation of routing information
       at area borders.  For this  type  of  request,  the  ls_id
       field  should  be  set  to  the  destination  network's IP
       address.  Request the summary link advertisements describ-
       ing  routes  to AS boundary routers.  They describe inter-
       area routes and enable the condensation of routing  infor-
       mation  at  area  borders.   For this type of request, the
       ls_id field  should  be  set  to  the  Router  ID  of  the
       described  AS  boundary  router.   Request the AS external
       link advertisements.  They describe routes to destinations
       external  to  the  Autonomous  System.   For  this type of
       request, the ls_id field should be set to the  destination
       network's  IP  address.  Display cumulative log.  This log
       includes  input/output  statistics  for  monitor  request,
       hello,  data  base  description, link-state request, link-
       state update, and link-state ack packets.  Area statistics
       are  provided  which  describe the total number of routing
       neighbors and number of active OSPF  interfaces.   Routing
       table statistics are summarized and reported as the number
       of intra-area routes, inter-area routes, and  AS  external
       data  base  entries.  Display cumulative errors.  This log
       reports the  various  error  conditions  which  can  occur
       between  OSPF  routing  neighbors  and shows the number of
       occurrences for each.  Display a list of valid  next  hops
       derived  from the SPF calculation.  Display the link-state
       database (except for  ASEs).   This  table  describes  the
       routers and networks making up the AS.  If retrans is non-
       zero, the retransmit list of neighbors held by  this  lsdb
       structure  will  be printed.  Display the AS external data
       base entries.  This table reports the advertising  router,
       forwarding  address,  age,  length, sequence number, type,
       and metric for each AS external route.  If retrans is non-
       zero,  the  retransmit list of neighbors held by this lsdb
       structure will  be  printed.   Display  the  OSPF  routing
       table.  This table reports the AS border routes, area bor-
       der routes, summary AS border routes,  and  networks  cur-
       rently  managed  via  OSPF.  Display all interfaces.  This
       report shows all interfaces configured for OSPF.  Informa-
       tion  reported  includes  the  area, interface IP address,
       interface type, interface state, cost, priority,  and  the
       IP address of the DR and BDR for the network.  Display all
       OSPF routing neighbors.  Information reported includes the
       area,  local  interface  address,  router  ID, neighbor IP
       address, state, and mode.  Display gated version  informa-
       tion.

                                                                2

ospf_monitor(1Mtcp)                           ospf_monitor(1Mtcp)

FFiilleess
       the monitor database file

RReeffeerreenncceess
       RFC 1583

                                                                3

