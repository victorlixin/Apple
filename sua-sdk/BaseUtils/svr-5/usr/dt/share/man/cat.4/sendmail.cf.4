

sendmail(1M)                                         sendmail(1M)

SSyynnooppssiiss
       sendmail flags address ...
       smtpd

DDeessccrriippttiioonn
       sendmail  sends a message to one or more recipients, rout-
       ing the message over whatever networks are  necessary.  It
       does  internetwork  forwarding as necessary to deliver the
       message to the correct place.

       sendmail is not intended  as  a  user  interface  routine;
       other  programs provide user-friendly front ends; sendmail
       is used only to deliver pre-formatted messages.

       With no flags, sendmail reads its standard input up to  an
       end-of-file  or a line consisting only of a single dot and
       sends a copy of the message found  there  to  all  of  the
       addresses  listed.  It  determines  the  network(s) to use
       based on the syntax and contents of the addresses.

       Local addresses are looked up in a file and aliased appro-
       priately.   Aliasing  can  be  prevented  by preceding the
       address with a backslash.  Beginning with 8.10, the sender
       is  included  in  any  alias  expansions.  For example, if
       ``john''  sends  to  ``group'',  and  ``group''   includes
       ``john'' in in the expansion, then the letter will also be
       delivered to ``john''.

   FFllaaggss
       Set the body type to type. Current legal values  are  7BIT
       or  8BITMIME.   Go into ARPANET mode. All input lines must
       end with a Carriage return-Linefeed (CR-LF), and all  mes-
       sages will be generated with a CR-LF at the end. Also, the
       From: and Sender: fields are examined for the name of  the
       sender.   Run  as  a  daemon.  This requires Berkeley IPC.
       sendmail will fork and  run  in  background  listening  on
       socket  25 for incoming SMTP connections. This is normally
       run from /etc/rc.  Same as bd, except runs in  foreground.
       Print  the persistent host status database.  Purge expired
       entries from the persistent host  status  database.   Ini-
       tialize the alias database.  Deliver mail in the usual way
       (default).  Print a listing of the queue.   Use  the  SMTP
       protocol  as  described  in  RFC 821 on standard input and
       output. This flag implies all the  operations  of  the  ba
       flag  that  are compatible with SMTP.  Run in address test
       mode. This mode reads addresses and  shows  the  steps  in
       parsing;  it  is  used for debugging configuration tables.
       Verify names only. Do not try to collect or deliver a mes-
       sage.   Verify  mode is normally used for validating users
       or mailing lists.  Use alternate configuration file. send-
       mail  refuses to run as root if an alternate configuration
       file is specified.  Set debugging value  to  X.   Set  the
       full  name  of  the sender.  Sets the name of the ``from''
       person (that is, the envelope sender of the  mail).   This

                                                                1

sendmail(1M)                                         sendmail(1M)

       address  can  also  be  used  in  the From: header if that
       header is missing during initial submission.  The envelope
       sender  address is used as the recipient for delivery sta-
       tus notifications and may also appear  in  a  Return-Path:
       header.  f can only be used by ``trusted'' users (normally
       root, daemon and network) or if the person you are  trying
       to  become is the same as the person you are.  Set the hop
       count to N. The hop count is incremented  every  time  the
       mail  is  processed.  When it reaches a limit, the mail is
       returned with an error message, the victim of an  aliasing
       loop. If not specified, Received: lines in the message are
       counted.  Ignore dots alone  on  lines  by  themselves  in
       incoming  messages.  This should be set if you are reading
       data from a file.  Set the identifier used in syslog  mes-
       sages  to the supplied tag.  Set delivery status notifica-
       tion conditions to dsn, which can be: no notifications  or
       a  comma  separated  list  of the values to be notified if
       delivery failed to be notified if delivery is  delayed  to
       be  notified when the message is successfully delivered Do
       not do aliasing.  Set option to the specified value.  This
       form  uses long names. See for more details.  Set option x
       to the specified value. This form  uses  single  character
       names only. The short names are not described in this man-
       ual page; see for details.  Set the name of  the  protocol
       used to receive the message. This can be a simple protocol
       name such as ``'' or a  protocol  and  hostname,  such  as
       ``:ucbvax''.   Processed  saved  messages  in the queue at
       given intervals. If time is  omitted,  process  the  queue
       once.  time is given as a tagged number, with s being sec-
       onds, m being minutes, h being hours, d being days, and  w
       being  weeks. For example, -q1h30m or -q90m would both set
       the timeout to one hour thirty minutes. If time is  speci-
       fied, sendmail will run in the background. This option can
       be used safely with bd.  Limit  processed  jobs  to  those
       containing  substr  as a substring of the queue ID.  Limit
       processed jobs to those containing substr as  a  substring
       of  one  of the recipients.  Limit processed jobs to those
       containing substr as a substring of the sender.   Set  the
       amount  of  the  message  to  be  returned  if the message
       bounces.  The return parameter can be to return the entire
       message  to return only the headers An alternate and obso-
       lete form of the f flag.   Read  message  for  recipients.
       To:,  Cc:,  and  Bcc:  lines will be scanned for recipient
       addresses. The Bcc: line will be deleted before  transmis-
       sion.  Any  addresses  in  the  argument list will be sup-
       pressed, that is, they will not  receive  copies  even  if
       listed  in the message header.  Initial (user) submission.
       This should always be set when called from  a  user  agent
       such  as or exmh and never be set when called by a network
       delivery agent such as Set the original envelope ID.  This
       is propagated across SMTP to servers that support DSNs and
       is returned in DSN-compliant error messages.  Go into ver-
       bose  mode. Alias expansions will be announced, and so on.
       Log all traffic in and out of mailers in the indicated log

                                                                2

sendmail(1M)                                         sendmail(1M)

       file.   This  should  only  be  used  as a last resort for
       debugging mailer bugs.  It will log a  lot  of  data  very
       quickly.   Stop  processing command flags and use the rest
       of the arguments as addresses.

   OOppttiioonnss
       There are also a number of processing options that may  be
       set.   Normally these will only be used by a system admin-
       istrator. Options may be set either on  the  command  line
       using  the  o flag (for short names), the O flag (for long
       names), or in the configuration file. This  is  a  partial
       list limited to those options that are likely to be useful
       on the command line and only shows the long names;  for  a
       complete list (and details), consult

       The  options are as follows: Use alternate alias file.  On
       mailers that are considered ``expensive'' to  connect  to,
       do not initiate immediate connection. This requires queue-
       ing.  Checkpoint the queue file after every  N  successful
       deliveries  (default  10). This avoids excessive duplicate
       deliveries when sending to long mailing lists  interrupted
       by  system  crashes.  Set the delivery mode to x. Delivery
       modes are interactive  (synchronous)  delivery  background
       (asynchronous) delivery queue only; that is, actual deliv-
       ery is done the next time the queue is run  deferred;  the
       same  as  q  except that database lookups (notably DNS and
       NIS lookups) are avoided Set error processing to  mode  x.
       Valid  modes  are:  mail  back the error message ``write''
       back the error message (or mail it back if the  sender  is
       not  logged in) print the errors on the terminal (default)
       throw away error messages (only exit status is  returned),
       do special processing for the BerkNet

       If  the  text of the message is not mailed back by modes m
       or w and if the sender is local to this machine, a copy of
       the  message  is  appended  to the file dead.letter in the
       sender's home directory.  Save -style From: lines  at  the
       front  of messages.  The maximum number of times a message
       is allowed to ``hop'' before we decide it is  in  a  loop.
       Do not take dots on a line by themselves as a message ter-
       minator.  Send error messages in MIME format. If not  set,
       the  DSN  (Delivery Status Notification) SMTP extension is
       disabled.  Set connection cache timeout.   Set  connection
       cache  size.   The log level.  Send to ``me'' (the sender)
       also if I am in an alias expansion.   Validate  the  right
       hand  side of aliases during a command.  If set, this mes-
       sage may have old style headers. If not set, this  message
       is  guaranteed  to have new style headers (that is, commas
       instead of spaces between addresses). If set, an  adaptive
       algorithm is used that will correctly determine the header
       format in most cases.  Select the directory  in  which  to
       queue  messages.   Save statistics in the named file.  Set
       the timeout on undelivered messages in the  queue  to  the
       specified  time.  After  delivery  has failed (for examle,

                                                                3

sendmail(1M)                                         sendmail(1M)

       because of a host being down) for  this  amount  of  time,
       failed  messages  will  be  returned  to  the sender.  The
       default is five days.  If set, a  user  database  is  con-
       sulted  to  get  forwarding information.  You can consider
       this an adjunct to the aliasing mechanism, except that the
       database  is intended to be distributed; aliases are local
       to a particular host. This may not be  available  if  your
       sendmail  does  not  have  the  USERDB option compiled in.
       Fork each job during queue runs. May be convenient on mem-
       ory-poor machines.  Strip incoming messages to seven bits.
       Set the handling of eight bit input to seven bit  destina-
       tions  to  mode:  (mimefy)  will convert to seven-bit MIME
       format (pass) will pass it as  eight  bits  (but  violates
       protocols)  (strict) will bounce the message Sets how long
       a job must ferment in the queue between attempts  to  send
       it.   Sets  the  default character set used to label 8-bit
       data that is not otherwise labelled.  If opening a connec-
       tion  fails,  sleep  for  sleeptime seconds and try again.
       Useful on dial-on-demand sites.  Set  the  behaviour  when
       there  are  no recipient headers (To:, Cc: or Bcc:) in the
       message to action: leaves the message unchanged adds a To:
       header with the envelope recipients adds an Apparently-To:
       header with the envelope recipients  adds  an  empty  Bcc:
       header  adds  a  header  reading ``To: undisclosed-recipi-
       ents:;'' Sets the  maximum  number  of  children  that  an
       incoming SMTP daemon will allow to spawn at any time to N.
       Sets the maximum number of connections per second  to  the
       SMTP port to N.  In aliases, the first character of a name
       may be a vertical bar to cause interpretation of the  rest
       of  the  name  as a command to pipe the mail to. It may be
       necessary to quote the name to  keep  sendmail  from  sup-
       pressing the blanks from between arguments. For example, a
       common alias is: -literal -offset  indent  -compact  msgs:
       "|/usr/bin/msgs  -s"  Aliases  may  also  have the syntax:
       :include: filename to ask sendmail to read the named  file
       for  a  list of recipients. For example, an alias such as:
       poets:  ":include:/usr/local/lib/poets.list"  would   read
       /usr/local/lib/poets.list for the list of addresses making
       up the group.

EExxiitt ccooddeess
       sendmail returns an exit status describing  what  it  did.
       The  codes are defined in <sysexits.h>: Successful comple-
       tion  on  all  addresses.   User  name   not   recognized.
       Catchall  meaning  necessary resources were not available.
       Syntax error in address.  Internal software error, includ-
       ing bad arguments.  Temporary operating system error, such
       as ``cannot fork''.  Host name  not  recognized.   Message
       could not be sent immediately, but was queued.  If invoked
       as sendmail will rebuild the alias database. If invoked as
       sendmail  will  print  the contents of the mail queue.  If
       invoked as sendmail will print the persistent host  status
       database.   If  invoked  as  sendmail  will  purge expired
       entries from the  persistent  host  status  database.   If

                                                                4

sendmail(1M)                                         sendmail(1M)

       invoked as smtpd, sendmail will act as a daemon, as if the
       -bd option were specified.

NNootteess
       sendmail is sometimes  implicated  in  problems  that  are
       actually the result of such things as as overly-permissive
       modes on directories.  For this  reason,  sendmail  checks
       the  modes on system directories and files to determine if
       they can be trusted.  Although these checks can be  turned
       off  and your system security reduced by setting the Dont-
       BlameSendmail option, the permission  problems  should  be
       fixed.  For more information, see:

FFiilleess
       Except for the file /etc/sendmail.cf itself and the daemon
       process ID file, the following pathnames are all specified
       in  /etc/sendmail.cf.   raw data for alias names data base
       of alias names  configuration  file  help  file  collected
       statistics temp files The process ID of the daemon

RReeffeerreenncceess
       RFC819, RFC821, RFC822

NNoottiicceess
       For   a   non-networked   system,   the   startup   script
       /etc/mail/sendmailrc     (which     is      linked      to
       /etc/rc2.d/S81sendmail,     /etc/rc1.d/K68sendmail,    and
       /etc/rc0.d/K68sendmail)  automatically  edits   the   file
       /etc/service.switch  to  contain  an  entry  which directs
       sendmail to only look up host names in /etc/hosts,  effec-
       tively  disabling DNS lookups.  The sendmailrc script only
       attempts  this   auto-configuration   if   the   /etc/ser-
       vice.switch  file  exists, and contains the following com-
       ment at the top of the file: # AUTO=YES If  the  /etc/ser-
       vice.switch  file  does  not  exist, it is not created; if
       this file exists, but does not contain the # AUTO=YES com-
       ment, the file is not altered.

       By  default, auto-configuration is enabled.  Therefore, if
       you want to include  your  own  customizations,  you  must
       change  the  comment  in  the  service.switch  file  to: #
       AUTO=NO

       See for more information.

       If you have added or removed a networking card  from  your
       hardware  configuration  using  the  Network Configuration
       Manager, you must stop and re-start in the case where  the
       manager does not ask you to reboot the system.  You may do
       so by executing the  following  commands:  /etc/mail/send-
       mailrc stop /etc/mail/sendmailrc start

                                                                5

