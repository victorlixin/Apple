

VipQuerySystemManagementInfo(3viVai)pQuerySystemManagementInfo(3via)

SSyynnooppssiiss
       cc  [flag  ...]  file  ...   -via  [library] ...  #include
       <vipl.h>

       VIP_RETURN     VipQuerySystemManagementInfo(VIP_NIC_HANDLE
       NicHandle,
            VIP_ULONG InfoType, VIP_PVOID *SysManInfo);

DDeessccrriippttiioonn
       The  VipQuerySystemManagementInfo  routine  returns system
       management information about the specified NIC. The  Info-
       Type  parameter allows the calling process to specify spe-
       cific pieces of information. The types of information that
       can be retrieved are VI provider specific, as are the con-
       tents of the system management information data structure.

       The  only defined InfoType value is VIP_SMI_AUTODISCOVERY,
       which provides a  mechanism  for  applications  to  access
       auto-discovery  information in order to obtain the network
       addresses of other nodes attached to the System Area  Net-
       work (SAN).

       The  SysManInfo structure is interpreted as both an IN and
       an OUT parameter for the network configuration request. It
       is interpreted as follows:
       -----------------------------------------------------------
       Element       Type            Definition
       -----------------------------------------------------------
       NumberOfHops  VIP_ULONG       Specifies  the maximum depth
                                     of interest to the register.
                                     Only    network    addresses
                                     within the  specified  depth
                                     are   returned.   Depth   is
                                     defined  as  the  number  of
                                     links  that are traversed by
                                     the  auto-discovery   opera-
                                     tion.   A   depth  of  1  is
                                     defined as the collection of
                                     nodes that are directly con-
                                     nected.

                                                                1

()                                                             ()

       **ADAddrArray VIP_NET_ADDRESS Pointer  to  an   array   of
                                     pointers   to   the   actual
                                     VIP_NET_ADDRESS   structures
                                     that  will  receive the dis-
                                     covered addresses. It is  up
                                     to  the  calling  process to
                                     allocate the ADAddrArray and
                                     initialize  the  pointers so
                                     as to point to the appropri-
                                     ately  sized VIP_NET_ADDRESS
                                     structures.

                                            The   VIP_NET_ADDRESS
                                            structures   must  be
                                            large enough to  hold
                                            an  address  for  the
                                            specified NIC (speci-
                                            fied  by  the  NicAd-
                                            dressLen field of the
                                            NicAttributes  struc-
                                            ture. The HostAddress
                                            field  must  be  long
                                            enough  to  hold  the
                                            host  portion  of the
                                            address  and  HostAd-
                                            dressLen must specify
                                            a length equal to  or
                                            greater than the num-
                                            ber of  bytes  needed
                                            to  specify  the host
                                            address. The Discrim-
                                            inatorLen  field  and
                                            the     discriminator
                                            portion     of    the
                                            HostAddress field are
                                            ignored.
       NumAdAddrs    VIP_ULONG       Specifies the number of ele-
                                     ments in the ADAddrArray. If
                                     the number of addresses dis-
                                     covered is larger  than  the
                                     number  requested,  an error
                                     is returned and  this  field
                                     is  updated  to  contain the
                                     number of entries needed  to
                                     return  a  full  list of the
                                     node addresses.

   AArrgguummeennttss
       The handle of the VI NIC.  Specifies a particular piece of
       system  management  information.  Pointer to a system man-
       agement information structure.

RReettuurrnn vvaalluueess
       The operation completed successfully.  The NIC handle  was

                                                                2

()                                                             ()

       invalid.   The  number  of  entries  specified to hold the
       auto-discovery information was less  than  the  number  of
       addresses that were discovered within the specified number
       of hops (NumberOfHops). Otherwise,  the  operation  failed
       due to insufficient resources.

RReeffeerreenncceess

                                                                3

