

mas_get_met(3mas)                               mas_get_met(3mas)

SSyynnooppssiiss
       cc [options] file -lmas

       #include  <mas.h>  caddr_t mas_get_met(int md, metid_t id,
       uint32 unitnum, ... );  caddr_t  mas_get_met_snap(int  md,
       metid_t id, uint32 unitnum, ... );

DDeessccrriippttiioonn
       The   function  mas_get_met  returns  the  address  of  an
       instance  of  a  metric.   The  function  mas_get_met_snap
       returns  the address of an instance of a metric within the
       snapshot buffer.  The metric  must  have  been  previously
       registered  by  a provider into a metric registration file
       with mas_register_met, and the registration file  must  be
       opened  by  the  consumer  with  mas_open prior to calling
       mas_get_met.

       The md argument  is  a  metric  descriptor  returned  from
       mas_open.   The second argument, id, is the metric ID num-
       ber of the metric whose address  will  be  returned.   The
       remaining  arguments  are  a list of unit numbers, one per
       resource on which the metric is based.  Unit  numbers  are
       numbered  sequentially from 0 to the value of the resource
       - 1.  If the metric was  registered  with  a  resource  of
       MAS_NATIVE or MAS_SYSTEM, unitnum should be set to 0.

       If  memory  mapped  access  is  being  used, (mas_open was
       called with acc set to MAS_MMAP_ACCESS), the metric values
       are  updated  in  real  time  at  the  address returned by
       mas_get_met.  The metric values  in  the  snapshot  buffer
       address returned by mas_get_met_snap are updated only when
       mas_snap is called.

       If read access is being used, (mas_open  was  called  with
       acc    set    to    MAS_READ_ACCESS),    mas_get_met   and
       mas_get_met_snap will return the same address  within  the
       snapshot buffer.  The metric values in the snapshot buffer
       reflect their values as of the time of the  last  call  to
       either mas_open or mas_snap.

   RReettuurrnn vvaalluueess
       On  success,  mas_get_met  and  mas_get_met_snap return an
       address at  which  the  metric  resides  in  the  caller's
       address space.

       On  failure,  mas_get_met and mas_get_met_snap return NULL
       and set mas_errno to identify the error.

   EErrrroorrss
       The requested metric ID id is not registered in the metric
       registration  file referred to by md.  The metric descrip-
       tor, md does not correspond to a metric registration  file
       previously  opened  by  mas_open.  A unit number, unitnum,
       falls outside  of  the  range  of  valid  values  for  the

                                                                1

mas_get_met(3mas)                               mas_get_met(3mas)

       resource  on which it is based.  The unit number is either
       less than 0 or it is greater than or equal to the value of
       the resource.  A metric listed as a resource is not regis-
       tered.  The metric registration file is corrupted.  A met-
       ric  listed  as a resource has more than one element.  The
       metric registration file is corrupted.  A metric listed as
       a  resource  has an object size that is not the same as an
       elementary type on the system, or is larger than uint32.

RReeffeerreenncceess

                                                                2

