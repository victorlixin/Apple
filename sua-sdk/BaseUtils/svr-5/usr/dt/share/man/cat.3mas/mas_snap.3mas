

mas_snap(3mas)                                     mas_snap(3mas)

SSyynnooppssiiss
       cc [options] file -lmas

       #include <mas.h> int mas_snap(int md);

DDeessccrriippttiioonn
       The  function mas_snap takes a snapshot of the metric data
       segments.  The md argument is a metric descriptor returned
       from mas_open.

       If  read  access  is being used, (mas_open was called with
       acc set to MAS_READ_ACCESS), the metric data segments  are
       read into the snapshot buffer with the read system call.

       If  memory  mapped  access  is  being  used, (mas_open was
       called with acc set to MAS_MMAP_ACCESS), the  metric  data
       segments  are  copied  from their memory mapped pages into
       the snapshot buffer with the memcpy library call.

       When  read  access  is   being   used,   mas_get_met   and
       mas_get_met_snap  both  return  the  address  of  a metric
       instance within the snapshot buffer.  When  memory  mapped
       access is being used, mas_get_met returns the address of a
       metric  instance  within  the  memory  mapped  pages,  and
       mas_get_met_snap returns the address to which the instance
       is copied within the snapshot buffer.

   RReettuurrnn vvaalluueess
       On success, mas_snap returns 0.

       On failure, mas_snap returns  -1  and  sets  mas_errno  to
       identify the error.

   EErrrroorrss
       The  metric descriptor, md does not correspond to a metric
       registration file previously  opened  by  mas_open.   Read
       access  was  in  use  and  the lseek system called failed.
       Read access was in use and the read system called  failed.

RReeffeerreenncceess

                                                                1

