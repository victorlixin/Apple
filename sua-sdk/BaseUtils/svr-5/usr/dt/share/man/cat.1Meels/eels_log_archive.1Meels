

eels_log_archive(1Meels)                 eels_log_archive(1Meels)

SSyynnooppssiiss
       eels_log_archive   -a   archive_name  [-b  time_spec]  [-d
       database] [-e time_spec] [-p] [-q SQL_Query] [-s]

DDeessccrriippttiioonn
       Use eels_log_archive to archive selected records from  the
       EELS  database, and optionally delete the selected records
       from the database.  The records are stored in  a  file  in
       compressed format.  An archive can be restored to a tempo-
       rary EELS database using

       The records are stored in the archives in compressed ASCII
       format,  using the command.  The first line of the archive
       provides  information  on  the  order  of  fields  in  the
       database.  The format string is a vertical bar | separated
       list of database fields, that specify the order of  fields
       in  the  archive.  This information is used when restoring
       the archive to make sure that the data ends up in the cor-
       rect  field of the database.  The remainder of the archive
       file contains a record per line with each field  separated
       by a vertical bar |.

       eels_log_archive  is  a script that uses to do most of its
       work. Either you must specify an SQL query when  you  call
       eels_log_archive  or  a default of select * from events is
       used which is  then  passed  to  eels_db_query  to  select
       records from the database.  The eels_db_query command out-
       puts records using a vertical bar | to delimit each field,
       so  the output of eels_db_query can be directly written to
       the archive  file.   The  data  is  not  actually  written
       directly to the file. It is first compressed by piping the
       output through the compress command.

       The eels_log_archive  command  prints  status  information
       when  archiving  which  includes  the number of records to
       archive, and a percentage of the total records  that  have
       been  archived.   This  information updates continually to
       give the operator an indication of how the archive is pro-
       ceeding.

   OOppttiioonnss
       The  name  of  the  archive  file.  A  .Z is automatically
       appended to the archive_name.  Only archive records at  or
       before  this  time.   The format of time_spec is: DD-month
       YYYY HH:MM:SS where month is Jan, Feb, Mar, and so on. You
       can  also  use  today, yesterday, tomorrow in place of the
       DD-Month specification.   The  name  of  the  database  to
       archive  records  from.  The  default  is defaultdb.  Only
       archive records at or before  this  time.   The  time_spec
       format  is  the  same as for the -b option.  Purge records
       from database after they are archived. The default  is  do
       not  purge.   The SQL query that selects the records to be
       archived.  The default  is select * from events.  Run this

                                                                1

eels_log_archive(1Meels)                 eels_log_archive(1Meels)

       command  in silent mode, that is, do not output any status
       messages to the screen.

EExxaammpplleess
       eels_log_archive                   -p                   -a
       /etc/eels/archives/eels_archive_03161998 \
            -q  "select  *  from  events  where LogSystemSource =
       'syslog'"

       The above example archives  all  records  that  originated
       from     syslog     to     an     archive    file    named
       /etc/eels/archives/eels_archive_03161998.

RReeffeerreenncceess

                                                                2

