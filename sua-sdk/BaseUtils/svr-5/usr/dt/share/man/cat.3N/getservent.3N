

getservent(3N)                                     getservent(3N)

SSyynnooppssiiss
       cc [options] files -lsocket -lnsl #include <netdb.h>

       struct servent *getservent(void);

       struct servent *getservbyname(const char *name, const char
       *proto);

       struct  servent  *getservbyport(int   port,   const   char
       *proto);

       void setservent(int stayopen);

       void endservent(void);

DDeessccrriippttiioonn
       getservbyname,   getersvbyport  and  getservent  return  a
       pointer to a servent structure, whose members contain  the
       fields of an entry in the network services database.

       getservent  reads the next entry in the database and opens
       a connection to the database if necessary.

       getservbyname searches the database from the beginning and
       finds the first entry for which the service name specified
       by name matches the s_name member and  the  protocol  name
       specified  by proto matches the s_proto member.  A connec-
       tion to the database is opened if necessary.  If proto  is
       a null value, any value of s_proto will be matched.

       getservbyport  searches  the  data base from the beginning
       and finds the first entry for which the port specified  by
       port  matches  the  s_port  member.   A  connection to the
       database is opened if  necessary.   If  proto  is  a  null
       value, any value of s_proto will be matched.  port must be
       in network byte order.

       setservent opens a connection to the  database,  and  sets
       the  next  entry  to the first entry.  If stayopen is non-
       zero, the net database will not be closed after each  call
       to getservent.

       endservent closes the database.

       The servent structure includes the following members: char
       *s_name;         /*  official  name  of  service  */  char
       **s_aliases;    /* alias list */ int    s_port;         /*
       port service resides at */ char   *s_proto;       /*  pro-
       tocol to use */

       The  members  of  this structure are: The official name of
       the service.  A zero terminated list  of  alternate  names
       for  the  service.   The  port number at which the service
       resides.  Port numbers are returned in network short  byte

                                                                1

getservent(3N)                                     getservent(3N)

       order.   The  name  of the protocol to use when contacting
       the service.

FFiilleess
UUssaaggee
       The port argument of getservbyport need not be  compatible
       with the port values of all address families.

       getservent,  getservbyname  and  getservbyport  may return
       pointers to static data, which may be overwritten by  sub-
       sequent calls to any of these functions.

       These  functions  are  generally  used  with  the Internet
       address family.

RReettuurrnn vvaalluueess
       A NULL pointer is returned on EOF or error.

RReeffeerreenncceess
NNoottiicceess
       All information is contained in a static area so  it  must
       be copied if it is to be saved.  For multi-threaded appli-
       cations, this must be done on a per-thread basis.

       Functions that provide successive entries in files on suc-
       cessive calls must be called from a single thread.

       These  functions use the name-to-address resolution mecha-
       nism described in and  This  mechanism  may  use  a  local
       database  or  the  services of Network Information Service
       (NIS) or Domain Name Service (DNS).

                                                                2

