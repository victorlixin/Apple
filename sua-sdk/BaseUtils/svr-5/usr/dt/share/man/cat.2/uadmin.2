

uadmin(2)                                               uadmin(2)

SSyynnooppssiiss
       #include <sys/uadmin.h>

       int uadmin(int cmd, int fcn, int mdep);

DDeessccrriippttiioonn
       uadmin  provides  control  for  basic administrative func-
       tions.  This system call is tightly coupled to the  system
       administrative  procedures and is not intended for general
       use.  The calling process must have  the  P_SYSOPS  privi-
       lege.

       The  argument  mdep is provided for machine-dependent use;
       for example, see A_SETCONFIG, below.

       cmd can take on one of the following values: The system is
       shut  down.   All  user  processes  are killed, the buffer
       cache is flushed, and the root file system  is  unmounted.
       The action to be taken after the system has been shut down
       is specified by fcn.  The functions are generic; the hard-
       ware  capabilities  vary  on  specific machines.  Halt the
       processor and turn off  the  power.   Reboot  the  system,
       using /stand/unix.  Interactive reboot; the system goes to
       firmware mode and, if the user strikes any key immediately
       after Booting UnixWare... is displayed, the system prompts
       for a bootable program name.  If fcn is not supplied or is
       invalid,  AD_IBOOT  is  used  as  the default.  The system
       stops immediately without  any  further  processing.   The
       action to be taken next is specified by fcn as above.  The
       root file system is mounted again after having been fixed.
       This  should be used only during the startup process.  The
       argument fcn is the number of seconds to adjust the clock.
       Currently   this  command  supports  the  single  function
       AD_PANICBOOT, which determines the system's behavior  fol-
       lowing  a  system  panic.   If  mdep is 1, the system will
       automatically reboot following a panic; if mdep is 0,  the
       system will remain in firmware mode following a panic.

   RReettuurrnn vvaalluueess
       If uadmin succeeds, it returns a value that depends on cmd
       as follows:

       -----------------------------
       A_SHUTDOWN    Never returns.
       A_REBOOT      Never returns.
       A_REMOUNT     0
       A_CLOCK       0
       A_SETCONFIG   0

       If uadmin fails, it returns -1 and sets errno to  identify
       the error.

   EErrrroorrss
       uadmin fails if any of the following are true: The calling

                                                                1

uadmin(2)                                               uadmin(2)

       process does not have the P_SYSOPS privilege.

RReeffeerreenncceess

                                                                2

