

msgget(2)                                               msgget(2)

SSyynnooppssiiss
       #include   <sys/types.h>   #include  <sys/ipc.h>  #include
       <sys/msg.h>

       int msgget(key_t key, int msgflg);

DDeessccrriippttiioonn
       msgget returns the  message  queue  identifier  associated
       with key.  This identifier is accessible by any process in
       the system, subject to normal access restrictions and  the
       permissions set with msgflg.

       A  successful  call to msgget does not imply access to the
       queue in question, only a successful name mapping from key
       to ID.

       A  message  queue  identifier and associated message queue
       and data structure [see are created for key if one of  the
       following  are  true:  key  is  IPC_PRIVATE.  key does not
       already have a message queue  identifier  associated  with
       it, and (msgflg&IPC_CREAT) is true.

       On  creation,  the  data structure associated with the new
       message  queue  identifier  is  initialized  as   follows:
       msg_perm.cuid,     msg_perm.uid,     msg_perm.cgid,    and
       msg_perm.gid are set to the effective user ID  and  effec-
       tive  group ID, respectively, of the calling process.  The
       low-order 9 bits of msg_perm.mode are set to the low-order
       9   bits   of  msgflg.   msg_qnum,  msg_lspid,  msg_lrpid,
       msg_stime, and msg_rtime are set to 0.  msg_ctime  is  set
       to  the  current  time.   msg_qbytes  is set to the system
       limit.

   RReettuurrnn vvaalluueess
       On success, msgget returns a non-negative integer,  namely
       a message queue identifier.  On failure, msgget returns -1
       and sets errno to identify the error.

   EErrrroorrss
       In the following conditions, msgget fails and  sets  errno
       to:  A  message  queue  identifier exists for key, but the
       queue was not created supporting the  specified  operation
       permissions.   A  message  queue identifier does not exist
       for key and (msgflg&IPC_CREAT) is false.  A message  queue
       identifier  is  to be created but the system-imposed limit
       on the maximum number of allowed message queue identifiers
       system wide would be exceeded.  A message queue identifier
       exists    for    key    but     (msgflg&IPC_CREAT)     and
       (msgflg&IPC_EXCL) are both true.

RReeffeerreenncceess

                                                                1

