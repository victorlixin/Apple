

p_online(2)                                           p_online(2)

SSyynnooppssiiss
       #include <sys/types.h> #include <sys/processor.h>

       int p_online(processorid_t processorid, int flag);

DDeessccrriippttiioonn
       p_online  brings  the  processor  specified by processorid
       online or takes it offline.  p_online  also  disables  the
       processor specified by processorid to prepare it for phys-
       ical removal from a system which supports the hot plugging
       of  CPUs.   When  a  processor is online, it is performing
       normal operations, scheduling and executing processes, and
       servicing any I/O devices to which it has access.

       If  flag  is  P_ONLINE, the specified processor is brought
       online.  If the processor was already online,  nothing  is
       done.   The  previous  state of the processor (P_ONLINE or
       P_OFFLINE) is returned.

       If flag is P_OFFLINE, the specified processor is shut down
       and  taken offline.  If the processor was already offline,
       nothing is done.  The previous state of the  processor  is
       returned.  An attempt to take a processor offline may fail
       for several reasons: One or more processes  are  bound  to
       the  processor.   The processor is the only online proces-
       sor.  The processor performs some essential  system  func-
       tion that cannot be taken over by another processor.

       If  flag is P_DISABLE, the specified processor is disabled
       and can then be physically removed  from  a  system  which
       supports  the  hot  plugging of CPUs.  If the processor is
       not physically present in the system, nothing is done.  If
       disabling  is  requested in a system that does not support
       the hot plugging of CPUs, this  function  simply  offlines
       the specified processor.

       The  calling  process  must have appropriate privileges to
       bring a processor online, take it offline, or disable  it.

   RReettuurrnn vvaalluueess
       On  success,  p_online  returns  P_ONLINE,  P_OFFLINE,  or
       P_DISABLE.  On failure, p_online returns -1 and sets errno
       to identify the error.

   EErrrroorrss
       In the following conditions, p_online fails and sets errno
       to: The calling process does not have  appropriate  privi-
       lege for the operation.  The processorid does not refer to
       an existing processor, or the processor for P_OFFLINE can-
       not be taken offline, the number of processors has reached
       the limit, or the flag has an invalid value.  The  proces-
       sorid  for  P_OFFLINE refers to a processor with processes
       bound to it, it is the only online processor, or the  pro-
       cessor performs some essential system function that cannot

                                                                1

p_online(2)                                           p_online(2)

       be taken over by  another  processor.   The  processor  to
       which  processorid  refers  cannot be brought online.  The
       processor to which processorid refers  is  not  physically
       present  in  the  hot  plug  system  when  flag  is either
       P_ONLINE or P_OFFLINE.

RReeffeerreenncceess
NNoottiicceess
   CCoonnssiiddeerraattiioonnss ffoorr lliigghhttwweeiigghhtt pprroocceesssseess
       Specific LWP, sets of LWPS, as well  as  entire  processes
       can be bound to a processor.  See

                                                                2

