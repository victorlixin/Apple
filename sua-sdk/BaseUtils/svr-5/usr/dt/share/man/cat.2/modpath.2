

modpath(2)                                             modpath(2)

SSyynnooppssiiss
       #include <sys/mod.h>

       int modpath(const char *pathname);

DDeessccrriippttiioonn
       modpath  allows processes with privilege P_LOADMOD to mod-
       ify the global search path used to locate object files for
       loadable  kernel modules on disk.  The search path modifi-
       cations take effect immediately and affect all  subsequent
       loads and all users on the system.  Affected loads include
       all auto-loads performed by the kernel auto-load mechanism
       and all demand-loads performed by using a module name.

       pathname  can  specify  a colon-separated list of absolute
       pathnames, or an absolute pathname, or NULL.

       If pathname specifies a pathname, the  named  directories:
       will be searched prior to searching any directories speci-
       fied by previous calls to modpath will be  searched  prior
       to  searching  the  default  loadable modules search path,
       which is always searched and always searched last  do  not
       have  to exist on the system at the time modpath is called
       do not have to exist on the system at the  time  the  load
       takes place

       If  pathname is equal to NULL, the loadable modules search
       path is reset to its default value /etc/conf/mod.d.

   RReettuurrnn vvaalluueess
       On  success,  modpath  returns  0.   On  failure,  modpath
       returns -1 and sets errno to identify the error.

   EErrrroorrss
       In  the following conditions, modpath fails and sets errno
       to: List of directories  specified  by  pathname  is  mal-
       formed.  The caller does not possess P_LOADMOD privileges.
       pathname is more than MAXPATHLEN characters long.   Unable
       to  perform  the  requested operation because the loadable
       modules functions are not configured into the system.

RReeffeerreenncceess

                                                                1

