

getdents(2)                                           getdents(2)

SSyynnooppssiiss
       #include <sys/types.h> #include <sys/dirent.h>

       int   getdents(int  fildes,  struct  dirent  *buf,  size_t
       nbyte);

DDeessccrriippttiioonn
       fildes is a file descriptor obtained from a  creat,  open,
       dup, fcntl, pipe, or ioctl system call.

       getdents  attempts  to read nbyte bytes from the directory
       associated with fildes and to format them as  file  system
       independent  directory entries in the buffer pointed to by
       buf.  Since the file system independent directory  entries
       are of variable length, in most cases the actual number of
       bytes returned will be strictly less than nbyte.   See  to
       calculate the number of bytes.

       The  file  system independent directory entry is specified
       by the dirent structure.  For a description of this see

       On devices capable of seeking, getdents starts at a  posi-
       tion in the file given by the file pointer associated with
       fildes.  Upon return from getdents, the  file  pointer  is
       incremented to point to the next directory entry.

       This  system  call was developed in order to implement the
       readdir routine (for a description, see and should not  be
       used for other purposes.

RReettuurrnn vvaalluueess
       On  success, getdents returns a non-negative integer indi-
       cating the number of bytes actually read, or 0 if the  end
       of  the  directory has been reached.  On failure, getdents
       returns -1 and sets errno to identify the error.

       In the following conditions, getdents fails and sets errno
       to:  fildes  is not a valid file descriptor open for read-
       ing.  buf points  outside  the  allocated  address  space.
       nbyte  is  not  large enough for one directory entry.  The
       current file pointer for the directory is not located at a
       valid  entry.   fildes  points to a remote machine and the
       link to that machine is no longer active.  fildes is not a
       directory.  An I/O error occurred while accessing the file
       system.

RReeffeerreenncceess

                                                                1

