

msgctl(2)                                               msgctl(2)

SSyynnooppssiiss
       #include   <sys/types.h>   #include  <sys/ipc.h>  #include
       <sys/msg.h>

       int msgctl(int msqid, int cmd, .../* struct msqid_ds  *buf
       */);

DDeessccrriippttiioonn
       msgctl provides a variety of message control operations as
       specified by cmd.  The following cmds are available: Place
       the  current  value  of  each member of the data structure
       associated with msqid into the  structure  pointed  to  by
       buf.  The contents of this structure are defined in intro.
       Set the value of the following members of the data  struc-
       ture  associated  with  msqid  to  the corresponding value
       found in the structure pointed  to  by  buf:  msg_perm.uid
       msg_perm.gid  msg_perm.mode /* only access permission bits
       */ msg_qbytes

       This cmd can only be executed by a  process  that  has  an
       effective  user  ID equal to the value of msg_perm.cuid or
       msg_perm.uid in the data structure associated with  msqid,
       or  by  a  process that has the P_OWNER privilege.  Remove
       the message queue identifier specified by msqid  from  the
       system  and  destroy  the message queue and data structure
       associated with it.  This cmd can only be  executed  by  a
       process  that  has an effective user ID equal to the value
       of msg_perm.cuid or msg_perm.uid  in  the  data  structure
       associated  with  msqid,  or  by  a  process  that has the
       P_OWNER privilege.

   RReettuurrnn vvaalluueess
       On success, msgctl returns 0.  On failure, msgctl  returns
       -1 and sets errno to identify the error.

   EErrrroorrss
       In  the  following conditions, msgctl fails and sets errno
       to: cmd is IPC_STAT and operation permission is denied  to
       the calling process [see buf points to an illegal address.
       msqid is not a valid message queue identifier.  cmd is not
       a  valid  command.   cmd  is  IPC_SET  and msg_perm.uid or
       msg_perm.gid is not valid.  cmd is IPC_STAT and uid or gid
       is  too  large to be stored in the structure pointed to by
       buf.  cmd is IPC_RMID or IPC_SET, the effective user ID of
       the   calling  process  is  not  equal  to  the  value  of
       msg_perm.cuid or msg_perm.uid in the data structure  asso-
       ciated  with  msqid  and  the  process  does  not have the
       P_OWNER privilege.

RReeffeerreenncceess

                                                                1

