

elfmark(1)                                             elfmark(1)

SSyynnooppssiiss
       elfmark -t osr5|udk|none file ...

DDeessccrriippttiioonn
       The  elfmark command is used to add an identifying mark to
       an ELF file.  The OpenServertm 5 platform supports a  dif-
       ferent application binary interface (ABI) from &geminiREL;
       and other platforms derived from   System  V,  Release  4.
       There  are  differences  in  the  size of fundamental data
       types like uid_t; differences in the layout of system data
       structures  like  struct  stat;  differences in values for
       system constants such as error numbers; and  even  differ-
       ences  in  fundamental compiler calling conventions.  This
       means that for an OpenServer binary to  run  correctly  on
       &geminiREL;  or  for a &geminiREL; binary to run correctly
       on OpenServer, the systems must be able to tell for  which
       platform the binary was intended.

       Most binaries compiled for OpenServer contain an identify-
       ing section added by the OpenServer assembler and  linker.
       This  section  is  called  .note and is visible through an
       executable's or shared library's program header as a  seg-
       ment of type PT_NOTE.  Unfortunately, the contents of this
       section are not made  part  of  the  program's  or  shared
       library's address space and are thus not easily accessible
       by the system.  The system therefore uses the presence  of
       the  section  and some heuristics about its size to deter-
       mine whether a file is intended for  OpenServer.   elfmark
       is intended to be used in those rare occurrences where the
       heuristics break down and the system misidentifies an  ELF
       file.   elfmark  changes the value in the e_flags field of
       an ELF file's ELF header.  This value is normally zero.

       elfmark accepts a single option, -t, whose argument  iden-
       tifies  the intended target platform and governs the value
       inserted in the e_flags field.  The argument can have  the
       following  values:  This  value asserts that the file uses
       the OpenServer application binary interface.   This  value
       asserts  that  the  file  uses the &geminiREL; application
       binary interface.  The &geminiREL;  ABI  conforms  to  the
       System  V  Application  Binary  Interface and the System V
       Application Binary Interface Intel386tm Architecture  Pro-
       cessor Supplement.  Since a System V ABI conforming appli-
       cation will have zero in the  e_flags  field  of  its  ELF
       header, a special mark is needed to distinguish it from an
       OpenServer ELF binary, which also has zero in the  e_flags
       field  (unless elfmarked).  This mark may also be inserted
       using the -Kudk option to the &geminiREL; cc and  CC  com-
       mands.   This  value  resets  the e_flags field of the ELF
       header to zero.

RReeffeerreenncceess

                                                                1

