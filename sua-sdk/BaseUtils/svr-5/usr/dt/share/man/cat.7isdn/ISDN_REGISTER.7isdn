

ISDN_REGISTER(7isdn)                         ISDN_REGISTER(7isdn)

SSyynnooppssiiss
       #include   <sys/stream.h>  #include  <sys/mdi.h>  #include
       <sys/scoisdn.h>

       typedef struct isdn_register_params {
           isdnU16_t  ApplId;
           isdnU32_t  level3cnt;
           isdnU32_t  datablkcnt;
           isdnU32_t  datablklen; } isdn_register_params_t;

DDeessccrriippttiioonn
       This ioctl binds a Stream to an ISDN device.  That  is,  a
       device dev/netx opened to the DLPI module registers itself
       with the MDI ISDN driver by means  of  this  ioctl.   This
       ioctl  must be processed before the device will respond to
       ISDN messages.

   PPaarraammeetteerrss
       The  data  portion  of  the  ioctl  uses  the  isdn_regis-
       ter_params structure.  The ISDN device allocates resources
       based on the parameters level3cnt,  datablkcnt,  and  dat-
       ablklen.   Failure  to allocate enough resources may cause
       connection establishment failures or data messages  to  be
       lost.   The  structure members are: application identifier
       number of simultaneous  logical  connections.   Note  that
       there may be many logical connections over a single physi-
       cal connection.  number of buffered data  messages.   size
       of  buffered  data  messages.  If datablklen is too small,
       messages may be lost.

   DDaattaa rreettuurrnneedd
       The  MDI ISDN driver should return the allocated  applica-
       tion  identifier  in  the  ApplId field of the isdn_regis-
       ter_params structure.  The ISDN  driver  should  use  this
       application  identifier  in the ApplId field of the header
       for all ISDN messages pertaining to this application.

       The application need not specify the ApplId field  of  the
       isdn_msg_hdr  for  ISDN  messages  to the ISDN device; the
       module performs this function.

       The data is one of the following:  Acknowledge  successful
       completion of the operation.  Set ioc_rval set to zero and
       return the associated ApplId in  the  isdn_register_params
       structure.   Acknowledge  unsuccessful  completion  of the
       operation.  Set ioc_count to zero,  ioc_rval  to  -1,  and
       ioc_error to an appropriate value from

RReeffeerreenncceess

                                                                1

