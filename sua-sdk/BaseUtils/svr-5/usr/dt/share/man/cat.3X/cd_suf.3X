

cd_suf(3X)                                             cd_suf(3X)

SSyynnooppssiiss
       cc [flag . . . ] file . . . -lcdfs -lgen [library] . . .

       #include <sys/cdrom.h>

       int  cd_suf(const  char  *path, int fsec, char *signature,
       int index,      char *buf, int buflen);

DDeessccrriippttiioonn
       cd_suf reads a System Use Field of  the  System  Use  Area
       associated  with  a  File  Section of a file or directory,
       following any continuation fields that may be present.   A
       continuation  field is a System Use Field that extends the
       System Use Area so more System Use Fields can  be  stored.
       Continuation  fields are defined in the System Use Sharing
       Protocol specification.  The System Use Area may  be  used
       by the manufacturer to record additional information about
       files and directories,  such  as  the  POSIX  file  system
       information.  Points to a file or directory within the CD-
       ROM file hierarchy.  Identifies the File Section  of  that
       file to be used.  The numbering starts with 1.  If fsec is
       set to -1, the System Use Area of the last File Section of
       that  file  is  assumed.  The 2-byte signature word of the
       requested System Use Field.  See cdfs-specific for a  list
       of the known valid System Use Field values.  Specifies the
       occurrence number of signature to return.  If signature is
       NULL,  the  index'th occurrence of the System Use Field is
       returned, starting from the beginning of the SUSP  portion
       of System Use Area.  Otherwise, the index'th occurrence of
       signature is returned.  The index number of the first Sys-
       tem  Use  Field  of  any  signature  is  1.  Specifies the
       address of the buffer in which to  place  the  System  Use
       Field.   Specifies  the  length  of the buffer in which to
       place the System Use Field.

RReettuurrnn vvaalluueess
       On success, cd_suf returns the number of bytes  placed  in
       buf.   If the signature field is not found, 0 is returned.
       On failure, cd_suf returns -1 and sets errno  to  indicate
       the error as follows: Search permission for a component of
       the path prefix is denied.  Read permission on the file or
       directory  pointed  to  by path is denied.  The address of
       buf, signature or path is invalid.  A  signal  was  caught
       during  the  cd_suf function.  The value of fsec, index or
       buflen is invalid.  The path argument points to a file  or
       directory  that  is  not within the CD-ROM file hierarchy.
       Too many file descriptors are currently open in the  call-
       ing  process.   The length of the path string exceeds MAX-
       PATHLEN.  A pathname component is longer  than  MAXNAMELEN
       while _POSIX_NO_TRUNC is in effect.  The system file table
       is full.  The Volume containing the File Section indicated
       by  fsec  is  not  mounted.   A component of path does not
       exist.  The path argument points to an empty string.   The
       File  Section indicated by fsec has no System Use Area.  A

                                                                1

cd_suf(3X)                                             cd_suf(3X)

       component of the path prefix is not a directory.  The  CD-
       ROM is not in the drive.  A read error occurred.

RReeffeerreenncceess
       cdfs-specific

       Rock Ridge Interchange Protocol and the System Use Sharing
       Protocol from the Rock Ridge Technical Working Group

                                                                2

