

t_getprotaddr(3xti)                           t_getprotaddr(3xti)

SSyynnooppssiiss
       cc [options] file -lnsl #include <xti.h>

       int   t_getprotaddr(int   fd,  struct  t_bind  *boundaddr,
            struct t_bind *peeraddr);

DDeessccrriippttiioonn
       This function is an TLI/XTI local management function used
       to  get  protocol  addresses for both the local and remote
       endpoints.  t_getprotaddr returns, for the transport  end-
       point  specified by fd, the local address of the transport
       endpoint (pointed to by boundaddr) and the remote  address
       of the peer (pointed to by peeraddr).

       The  local  address  is available if the endpoint is bound
       (not in the T_UNBND state) and the peer address is  avail-
       able if the endpoint is in the T_DATAXFER state.

   PPaarraammeetteerrss
       File descriptor for the transport endpoint associated with
       the protocol address.  Points to the bound address of  the
       local transport endpoint.  Points to the peer address.

   SSttrruuccttuurree ddeeffiinniittiioonnss
       boundaddr  and  peeraddr  point to a t_bind structure con-
       taining the  following  members:  struct  netbuf  addr; /*
       address  */  unsigned qlen;      /* connect indications */
       The  netbuf  addr  members  (len,  maxlen  and  buf)   are
       described  in  len  specifies  the  number of bytes in the
       address, buf points to the address buffer, and  maxlen  is
       the  maximum size of the address buffer.  qlen, in connec-
       tion mode only, is used to indicate the maximum number  of
       outstanding connect indications.

       In  boundaddr  and peeraddr, maxlen is the maximum size of
       the address buffer, specified by the user, and buf  points
       to the buffer where the address will be placed.

       On  return,  if  the endpoint specified by fd is currently
       bound, the buf field of boundaddr points to the address of
       the transport endpoint and len indicates the length of the
       address.  If the endpoint is not bound, the len member  of
       boundaddr returns a value of 0.

       If  the transport user is in the T_DATAXFER state, the buf
       member of peeraddr points to the address of the peer (cur-
       rently  connected  to  fd and the len member indicates the
       length of that address.  If the endpoint is not connected,
       the len member of peeraddr returns a value of 0.

   SSttaattee ttrraannssiittiioonnss
       t_getprotaddr   may  be issued from any valid state except
       T_UNINIT and has no effect on the state.

                                                                1

t_getprotaddr(3xti)                           t_getprotaddr(3xti)

FFiilleess
       X/Open Transport Interface Library (shared object) Network
       Services Library (shared object)

UUssaaggee
       This  function  is applicable for both connection-mode and
       connectionless transport  services.   However,  since  the
       remote  endpoint  is  never  in the TDATAXFER state if the
       service is connectionless, only the address of  the  bound
       endpoint will be returned.

RReettuurrnn vvaalluueess
       t_getprotaddr  returns  a value of 0 on successful comple-
       tion and -1 on failure and t_errno is set to indicate  the
       error.

   EErrrroorrss
       On  failure,  t_errno  may be set to one of the following:
       The specified file descriptor does not refer to  a  trans-
       port endpoint.  The number of bytes (maxlen) allocated for
       an incoming argument is greater than zero but  not  suffi-
       cient to store the value of that argument.  A system error
       has occurred during execution of this function.  A  commu-
       nication  problem  has  been  detected  with the transport
       provider and  there  is  no  other  value  of  t_errno  to
       describe the error condition.

RReeffeerreenncceess

                                                                2

