

installf(1M)                                         installf(1M)

SSyynnooppssiiss
       installf  [-c class] pkginst pathname [ftype [major minor]
       [mode owner group]] [mode owner group] [mac  fixed  inher-
       ited]]

       installf [-c class] pkginst -

       installf -f [-c class] pkginst

       installf [[-c class] pkginst path1=path2 [l|s]

DDeessccrriippttiioonn
       installf  is  a  tool available for use from within custom
       procedure scripts such as preinstall, postinstall,  prere-
       move, and postremove.  When these scripts create or modify
       files, installf should be used to register the addition or
       change into the system's contents database.

       When  the  second  synopsis is used, the pathname descrip-
       tions will be read from standard  input.   These  descrip-
       tions are the same as would be given in the first synopsis
       but the information is given in the form of a list.   (The
       descriptions  should  be  in  the  form:  pathname  [ftype
       [[major minor] [mode owner group]].)   [mac  fixed  inher-
       ited]].)

       When  the  last synopsis is invoked, the pathname argument
       is used to specify a link, where path1 indicates the  link
       and  path2  the  file being linked to.  The ftypes l and s
       are used to specify a hard link or symbolic link,  respec-
       tively.   If  ftype is not specified, installf defaults to
       type l.

       After all files have  been  appropriately  created  and/or
       modified,  installf should be invoked with the -f synopsis
       to indicate that installation is  final.   Links  will  be
       created  at  this time and, if attribute information for a
       pathname was not specified during the original  invocation
       of  installf  or was not already stored on the system, the
       current attribute values for the pathname will be  stored.
       Otherwise,  installf  verifies that attribute values match
       those given on the command  line,  making  corrections  as
       necessary.   In all cases, the current content information
       is calculated and stored appropriately.  Class with  which
       installed  objects should be associated.  Default class is
       none.  Name of package instance with  which  the  pathname
       should  be  associated.  Pathname that is being created or
       modified.  Special characters, such as an equal sign  (=),
       are  included in pathnames by surrounding the entire path-
       name in single quotes (as in, for example, '/usr/lib/~=').
       When  a pathname is specified on a shell command line, the
       single quotes must be preceded by backslashes  so  they're
       not  interpreted by the shell.  A one-character field that
       indicates the file type.  Possible file types include:

                                                                1

installf(1M)                                         installf(1M)

       a standard executable or data file a  file  to  be  edited
       upon installation or removal volatile file (one whose con-
       tents are  expected  to  change)  directory  an  exclusive
       directory  linked file named pipe character special device
       block special device symbolic link

       Once a file has the file type attribute v, it will  always
       be  volatile.   For  example,  if  a  file being installed
       already exists and has the file  type  attribute  v,  then
       even  if  the  version  of the file being installed is not
       specified as volatile, the file type attribute will remain
       volatile.   The  major  device  number.  The field is only
       specified for block or  character  special  devices.   The
       minor  device  number.   The  field  is only specified for
       block or character special devices.  The octal mode of the
       file  (for example, 0664).  A question mark (?)  indicates
       that the mode will be left unchanged,  implying  that  the
       file  already exists on the target machine.  If the direc-
       tory doesn't exist, the default is 0755. If it's  a  file,
       the default is 0644.  This field is not used for linked or
       symbolically linked files.  The owner  of  the  file  (for
       example, bin or root).  The field is limited to 14 charac-
       ters in length.  A question mark (?)  indicates  that  the
       owner  will  be  left  unchanged,  implying  that the file
       already exists on  the  target  machine.   If  it  doesn't
       exist, owner defaults to root.  This field is not used for
       linked or symbolically linked files.  The group  to  which
       the  file belongs (for example, bin or sys).  The field is
       limited to 14 characters in length.  A question  mark  (?)
       indicates  that the group will be left unchanged, implying
       that the file already exists on the target machine.  If it
       doesn't exist, group defaults to other.  This field is not
       used for linked or symbolically linked files.  The  Manda-
       tory Access Control (MAC) Level Identifier (LID), an inte-
       ger value that specifies a combination of  a  hierarchical
       classification  and  zero  or  more non-hierarchical cate-
       gories.  A question mark (?) indicates that the mac  field
       will  be  left  unchanged,  implying that the file already
       exists on the target machine.   This  field  can  only  be
       applied  to  a  file  on a sfs-type file system and is not
       used for linked files or packaging information files.

       If the mac attribute is not supplied, and the target  file
       system  is  of  type  sfs, then files are installed at the
       USER_PUBLIC MAC level.  A comma separated  list  of  valid
       mnemonic fixed privilege names as defined for the filepriv
       command.  The string NULL is used in place  of  the  comma
       separated  list  when privilege is not to be specified.  A
       question mark (?) indicates that the fixed field  will  be
       left  unchanged,  implying that the file already exists on
       the target machine.  If the fixed attribute  is  not  sup-
       plied,  then files are installed with no fixed privileges.
       This field is not  used  for  linked  files  or  packaging
       information  files.   A  comma  separated  list  of  valid

                                                                2

installf(1M)                                         installf(1M)

       mnemonic inherited privilege  names  as  defined  for  the
       filepriv command.  The string NULL is used in place of the
       comma separated list when privilege is not  to  be  speci-
       fied.   A  question  mark (?) indicates that the inherited
       field will be  left  unchanged,  implying  that  the  file
       already exists on the target machine.

       If the inherited attribute is not supplied, then files are
       installed with no inheritable privileges.  This  field  is
       not  used for linked files or packaging information files.
       Indicates that installation is complete.  This  option  is
       used  with the final invocation of installf (for all files
       of a given class).

FFiilleess
       language-specific message file [See LANG on

EExxaammpplleess
       The following example shows the use  of  installf  invoked
       from an optional preinstall or postinstall script: #create
       /dev/xt directory #(needs to be  done  before  drvinstall)
       installf  $PKGINST  /dev/xt  d 755 root sys ||      exit 2
       majno=`/usr/sbin/drvinstall -m /etc/master.d/xt
            -d $BASEDIR/data/xt.o  -v1.0`  ||       exit  2  i=00
       while [$i -lt $limit] do
         for j in 0 1 2 3 4 5 6 7
         do
           echo  /dev/xt$i$j c $majno `expr $i * 8 + $j` 644 root
       sys
           echo /dev/xt$i$j=/dev/xt/$i$j
         done
         i=`expr $i + 1`
         [$i -le 9] && i="0$i" #add leading zero done |  installf
       $PKGINST  -  ||  exit  2  # finalized installation, create
       links installf -f $PKGINST || exit 2

RReeffeerreenncceess
EExxiitt ccooddeess
       Successful completion of script.  Fatal  error.  Installa-
       tion process is terminated at this point.  Internal error.

NNoottiicceess
       When ftype is specified, the required fields  shown  below
       must be defined:
       -------------------------------------------
       ftype         Required Fields
       -------------------------------------------
       _pp _xx _dd _ff _vv _ee   _m_o_d_e _o_w_n_e_r _g_r_o_u_p
       _cc _bb           _m_a_j_o_r _m_i_n_o_r _m_o_d_e _o_w_n_e_r _g_r_o_u_p

       The  installf command will create directories, named pipes
       and special devices on the original invocation.  Links are
       created  when  installf  is  invoked with the -f option to
       indicate installation is complete.

                                                                3

installf(1M)                                         installf(1M)

       For symbolically linked files, path2  can  be  a  relative
       pathname,  such as ./ or ../.  For example, if you enter a
       line     such     as     installf     -c     none     pkgx
       /foo/bar/etc/mount=../usr/sbin/mount s

       path2  (/foo/bar/etc/mount)  will  be  a  symbolic link to
       ../usr/sbin/mount.

       When a link is specified, the directory in which the  link
       is  to  reside must exist, otherwise installf -f will fail
       for that entry.

       Files installed with installf will be placed in the  class
       none,  unless a class is defined with the command.  Subse-
       quently, they will be removed when the associated  package
       is  deleted.   If  this  file should not be deleted at the
       same time as the package, be certain to  assign  it  to  a
       class which is ignored at removal time.  To do this, asso-
       ciate the file to a class  which  will  be  handled  by  a
       removal class action script delivered with the package.

       When  classes  are used, installf must be used as follows:
       installf -c class1 installf -c class2 installf -f

       MAC levels (mac) are always installed on sfs file systems,
       but  affect  access checking only if the Enhanced Security
       Utilities are installed and running.

       Fixed and inheritable privileges (fixed and inherited)  on
       files, if present, are always installed.  When a file with
       fixed privileges is executed,  the  fixed  privileges  are
       propagated  to  the  new  process  by both the SUM and LPM
       privilege modules; inheritable privileges are only  propa-
       gated by the LPM privilege module.  The LPM privilege mod-
       ule is included in the Enhanced Security Utilities.

       Using multiple  invocations  is  discouraged  if  standard
       input  style invocations can be used with a list of files.
       This will be much faster because the contents file must be
       processed for each entry.

                                                                4

