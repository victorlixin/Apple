

ndcfg(1M)                                               ndcfg(1M)

SSyynnooppssiiss
       ndcfg  [-a]  [-b]  [-d X] [-e] [-f filename] [-h] [-j] [-l
       filename] [-m] [-n] [-q] [-S] [-t]  [-v]  [-D  dec_number]
       [-W num_secs]

       ndcfg

DDeessccrriippttiioonn
       ndcfg  is a general-purpose tool for installing, configur-
       ing, modifying, and removing network drivers from the sys-
       tem.   It checks the network adapter driver's file, ignor-
       ing any that contain errors or are not applicable  to  the
       system,  and waits for user input.  ndcfg is run automati-
       cally by but can also be run by users, either directly  or
       as  part  of  a Driver writers can also use ndcfg to check
       for syntax errors in their bcfg file.

       ndcfg creates a log in  the  /usr/lib/netcfg/tmp/ndcfg.log
       file  when  network  adapter  drivers  are configured with
       either the Network Configuration Manager or the -l  option
       to  the  command.  This log shows exactly what happened as
       the driver was configured, including all ndcfg actions.

   CCoommmmaanndd lliinnee ooppttiioonnss
       ndcfg accepts the following command line options  in  both
       interactive  and batch modes: use tab as delimiter in out-
       put should run set resput delimiter to char X.  Default is
       space.   Treat  first  error  condition as fatal.  Display
       command output as well as logging output to  a  file  when
       running with -l option.  Log all input and output to file-
       name.  TCL mode.  This sets and unsets  many  flags.   Set
       debugging  level  to the number bitmask.  Generate missing
       netcfg scripts.  ndcfg will generate any  scripts  missing
       from  the  /usr/lib/netcfg/query  directory.   Set  RMopen
       timeout to num_secs.  Default is 60 seconds.

       The following command line  options  are  valid  only  for
       interactive  mode:  Check the bcfg file specified by file-
       name for syntax errors.  filename must give  the  absolute
       path.   Show  heading  in output.  Enable more mode.  This
       mode can also be set with the more command  while  running
       ndcfg.   Do  not  show  the  ndcfg>  prompt.   Do not load
       default bcfg files.  Verbose mode.

   IInntteerraaccttiinngg wwiitthh nnddccffgg
       ndcfg can be run as either a batch or interactive  command
       with  a large set of commands for examining the configura-
       tion  of  a  network  adapter  card  and  its   associated
       driver(s).

       Input  lines  to  ndcfg take the form: command [arguments]
       command is one of  the  ndcfg  commands  described  below;
       arguments are qualifying data for the command.

                                                                1

ndcfg(1M)                                               ndcfg(1M)

       In  the command descriptions: is a number that corresponds
       to a bcfg file.  corresponds  to  the  netcfg  chain  that
       describes the device (for example, en0).

       The  commands available within ndcfg are grouped according
       to function:

   GGeenneerraall ccoommmmaannddss
       Run specified  command from the shell.   Piping  works  to
       string  together  a  series of commands.  Display work and
       maximum kernel privilege sets.  Quit  the  ndcfg  program.
       Clear  the screen.  Set permanent debugging level to deci-
       mal_number for this bcfg file only.  Display help for com-
       mands.   Turn  mode on or off.  Read symbol from /dev/kmem
       and display its value.  If newvalue is specified, then the
       contents  of  the  symbol  are  changed to newvalue.  Show
       installed adapters that support promiscuous mode.  See the
       manual  page  for  more information about promiscuous mode
       support.  Do  not  display  information  about  bcfg  file
       errors.   List  the bcfg files that were rejected by ndcfg
       and the reason(s) why they were rejected.  Turn  TCL  mode
       off  or on.  Send out a test frame on the specified inter-
       face to which other data link providers on the local  net-
       work  should  respond.   Some  network  drivers  may  also
       respond on behalf  of  the  sending  interface.   In  such
       cases,  a  response  of ``success'' may only indicate that
       the driver saw the packet, and not that the  interface  is
       active.   Display  all information about bcfg file errors.
       This is equivalent to the -v  command  line  option.   The
       default behavior is to suppress all notices and errors.

   SSppeecciiffyy bbccffgg ffiilleess ttoo uussee
       Show  the  current  bcfg  index for the specified absolute
       pathname.  Show the number of bcfg files loaded.   Display
       the bcfg index for the specified element.  Load all bcfg
       files contained in the pathname_hierarchy tree (usually
       either /etc/inst/nics/drivers or /etc/inst/nd/mdi).  path-
       name_hierarchy must give the absolute pathname.  Load  the
       specified bcfg file.  pathname_file must give the absolute
       pathname.  Show full path name for each bcfg file that  is
       currently loaded.

   GGeenneerraall bbccffgg iinnqquuiirryy aanndd mmaanniippuullaattiioonn ccoommmmaannddss
       Determine  whether  the  ISA  driver corresponding to this
       bcfg file has the CFG_VERIFY subroutine to the entry point
       or,  for  DDI  versions  prior to version 8, a entry point
       routine.  Show the DRIVER_NAME  and  bcfg  index  for  all
       loaded  bcfg files.  Install driver represented by bcfgin-
       dex into the kernel.  actual_topology is one of  the  fol-
       lowing:  ETHER,  TOKEN,  ISDN, FDDI, ATM, X25, FRAMERELAY,
       OTHER.  lanwan is set to 1 for LAN devices and 2  for  WAN
       devices.

       args  is  the  list  of arguments defined for this driver.

                                                                2

ndcfg(1M)                                               ndcfg(1M)

       KEY= is always required, as are any CUSTOM parameters that
       are  defined in the driver's file.  ISA bus drivers define
       additional parameters such as  IRQ,  IOADDR,  MEMADDR  and
       DMA.   Modify  the  value of variable in the resource man-
       ager.  Remove driver represented by element from the  ker-
       nel.   Retrieve  current  parameters  from  firmware.  Set
       parameters on firmware.  The following parameters  can  be
       set:  IOADDR,  DMA, MEMADDR, IRQ, a CUSTOM parameter.  See
       for more information about these parameters.   Unload  all
       bcfg files from memory.

   DDiissppllaayy iinnffoorrmmaattiioonn ffrroomm bbccffgg ffiillee
       Display  all  possible  LAN  or WAN topologies that can be
       used on this machine based on currently-loaded bcfg files.
       Use  the  output  of this command as input to the showtopo
       command and  for  the  showserialttys  command  if  SERIAL
       appears  in  the  list.   Display  the BUS= values for the
       specified indexnumber in the bcfg file.  Display the  con-
       tents  of  the  specified CUSTOM[x] array in the specified
       bcfg file.  Display the value of CUSTOM_NUM  in the speci-
       fied  bcfg  file.   Display the DRIVER_NAME values for the
       specified indexnumber in the bcfg file.  Display the value
       of  HELPFILE   in  the  specified  bcfg file.  Display the
       index(es) for each DRIVER_NAME variable value in the  bcfg
       file.    Display   the  NAME=  values  for  the  specified
       indexnumber in the bcfg file.  Show bcfg  files  that  are
       invalid and give the reason.  Show all serial device names
       available for use in the /dev/term  directory.   Show  the
       specified  variable and value from the bcfg file.  Display
       all cards to install on machines that  have  the  topology
       specified by topo_arg.

   DDiissppllaayy iinnffoorrmmaattiioonn ffrroomm iinnccoorree rreessoouurrccee mmaannaaggeerr ddaattaabbaassee
       Display   all  parameters  from  incore  resource  manager
       database (or the entry associated with the  resource  man-
       ager  key) with values interpreted as: number number_range
       string Display the value of the specified  parameter  from
       the incore resource manager database.  If the parameter is
       unknown to the resource manager library, you  must  supply
       type from the following: numeric numeric range string Dump
       contents of incore resource manager database (or the entry
       associated  with  the  resource  manager  key)  similar to
       Assign the specified value  to  parameter  in  the  incore
       resource manager database.  If the parameter is unknown to
       the resource manager library, you must  supply  type  from
       the  following:  numeric  numeric  range string Show which
       resource manager  key  contains  the  specified  variable.
       Walk  through  resource  manager  searching  for unclaimed
       BOARD_IDS  that  match  all  located  BOARD_IDS  and  BUS.
       Returns  bcfgindex  entries for unclaimed BOARD_IDS or, if
       all BOARD_IDS are claimed,  returns  ERROR.   Display  the
       CUSTOM parameters and values that are currently associated
       with  NETCFG_ELEMENT  in  the  incore   resource   manager
       database.   Display the attributes in the resource manager

                                                                3

ndcfg(1M)                                               ndcfg(1M)

       database that are associated with NETCFG_ELEMENT.

   DDiissppllaayy bbuuss ccoonnffiigguurraattiioonn iinnffoorrmmaattiioonn
       Display EISA information  in  long  format.   An  optional
       resource manager key can be supplied.  Display EISA infor-
       mation in short format.  An optional resource manager  key
       can  be  supplied.  Display &i2o; information in long for-
       mat.  An optional resource manager key  can  be  supplied.
       Display  &i2o;  information  in short format.  An optional
       resource manager key can be supplied.  Display MCA  infor-
       mation  in  long format.  An optional resource manager key
       can be supplied.  Display MCA information in short format.
       An optional resource manager key can be supplied.  Display
       PC Card information in long format.  An optional  resource
       manager  key can be supplied.  Display PC Card information
       in short format.  An optional resource manager key can  be
       supplied.   Display  PCI  information  in long format.  An
       optional resource manager key can  be  supplied.   Display
       PCI  information  in  short  format.  An optional resource
       manager key can be supplied.  Display the  identified  PCI
       vendor.   vendorid can be decimal, hex, or octal; hex num-
       bers start with 0x, octal number start  with  0,  and  any
       other number is assumed to be decimal.

   DDiissppllaayy EELLFF iinnffoorrmmaattiioonn
       Retrieve  the  version stamp from the ELF header for file-
       name.  Embed version information  in  text  into  the  ELF
       header  for  filename.   This  creates  a new ELF section.
       Display version string from the Driver.o  file  associated
       with  this  bcfg  file.  The version string corresponds to
       the following symbol defined in the Driver.o file:  static
       char  _ndversion[]="my  sample driver version 1.0"; netcfg
       displays this string when it displays card information.

   HHoott--pplluugg rreellaatteedd ccoommmmaannddss
       Determine if the driver represented by element is both DDI
       8  and  hot-plug  capable.   Dump all hot-plug structures.
       Get current Hot Plug Services  Library  (HPSL)  statistics
       for  the  loaded  driver represented by element.  Resume a
       previously suspended DDI 8 driver driver  associated  with
       element.  Suspend the network adapter associated with ele-
       ment by calling the DDI 8 driver driver with  CFG_SUSPEND.

   FFaaiilloovveerr rreellaatteedd ccoommmmaannddss
       Reconfigure the specified netX device (backup_netX_device)
       as a primary device instead of a backup device.  Make  the
       netX    device    specified    as   the   first   argument
       (backup_netM_device) into the backup device for  the  pri-
       mary   device  specified  as  the  second  argument  (pri-
       mary_netN_device).

FFiilleess
       MDI driver directories ndcfg log for the driver configura-
       tion,  created  automatically by the Network Configuration

                                                                4

ndcfg(1M)                                               ndcfg(1M)

       Manager or the -l option to the command.

RReeffeerreenncceess

                                                                5

