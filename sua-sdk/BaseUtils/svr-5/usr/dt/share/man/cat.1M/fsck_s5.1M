

fsck_s5(1M)                                           fsck_s5(1M)

SSyynnooppssiiss
       fsck [-F s5] [generic_options] [special . . .]

       fsck  -F  s5  [generic_options] [-y] [-n] [-p] [-sX] [-SX]
       [-tfile] [-l] [-q] [-D] [-f] [special . . .]

DDeessccrriippttiioonn
       generic_options are options supported by the generic  fsck
       command.

   ss55--ssppeecciiffiicc ooppttiioonnss
       Specify  the  s5 FSType. If -F s5 is not specified heuris-
       tics similiar to those used by are used to  determine  the
       file  system  type.  This command executes faster if it is
       not required to autodetect file system types. If possible,
       specify the -F s5.  Assume a yes response to all questions
       asked by fsck.  Assume a  no  response  to  all  questions
       asked  by  fsck;  do  not open the filesystem for writing.
       Correct inconsistencies that can be  fixed  automatically,
       that  is, inconsistencies that are deemed harmless and can
       be fixed without confirmation by the administrator.  Exam-
       ples  of  such  inconsistencies  are unreferenced i-nodes,
       incorrect counts in the superblocks, and missing blocks in
       the  free list.  Ignore the actual free list and (uncondi-
       tionally) reconstruct a new one by  rewriting  the  super-
       block   of  the  filesystem.   The  filesystem  should  be
       unmounted while this is done; if  this  is  not  possible,
       care should be taken that the system is quiescent and that
       it is rebooted immediately afterwards.  This precaution is
       necessary  so  that  the  old,  bad,  in-core  copy of the
       superblock does not continue to be  used,  or  is  written
       back to the filesystem.

       The -sX suboption allows for creating an optimal free-list
       organization.

       If X is not given, the values used when the filesystem was
       created  are  used.   The format of X is cylinder size:gap
       size.  Conditionally reconstruct the free list. This  sub-
       option  is  like  -sX  above  except that the free list is
       rebuilt only if there were no discrepancies discovered  in
       the  filesystem. Using this option forces a no response to
       all questions asked by fsck.  This is useful  for  forcing
       free  list  reorganization  on uncontaminated filesystems.
       If fsck cannot obtain enough memory to keep its tables, it
       uses  a  scratch  file. If the -t option is specified, the
       file named is used as the scratch file, if needed.   With-
       out  the  -t  option,  fsck  prompts  for  the name of the
       scratch file.  The  file  chosen  should  not  be  on  the
       filesystem  being checked, and if it is not a special file
       or did not already exist, it is  removed  when  fsck  com-
       pletes.   Identify  damaged  files by their logical names.
       Quiet fsck.  Unreferenced fifos will silently be  removed.
       If   fsck  requires  it,  counts  in  the  superblock  are

                                                                1

fsck_s5(1M)                                           fsck_s5(1M)

       automatically fixed and the free list salvaged.   Directo-
       ries  are  checked  for  bad  blocks.  Useful after system
       crashes.  Fast check.  Check block and sizes and check the
       free list.  The free list is reconstructed if it is neces-
       sary.  Inconsistencies  checked  are  as  follows:  Blocks
       claimed  by more than one i-node or the free list.  Blocks
       claimed by an i-node or the free list outside the range of
       the  file  system.   Incorrect  link counts.  Size checks:
       Incorrect number of blocks.  Directory  size  not  16-byte
       aligned.   Bad  i-node  format.   Blocks not accounted for
       anywhere.  Directory checks: File pointing to  unallocated
       i-node.   I-node number out of range.  Super Block checks:
       More than 65536 i-nodes.  More  blocks  for  i-nodes  than
       there  are in the filesystem.  Bad free block list format.
       Total free  block  and/or  free  i-node  count  incorrect.
       Orphaned  files  and  directories  (allocated but unrefer-
       enced) are, with the user's  concurrence,  reconnected  by
       placing them in the lost+found directory, if the files are
       nonempty.  The user is notified if the file  or  directory
       is  empty or not.  Empty files or directories are removed,
       as long as the -n suboption is not specified.  fsck forces
       the   reconnection  of  nonempty  directories.   The  name
       assigned is the i-node number.

RReeffeerreenncceess
NNoottiicceess
       Checking the raw device is almost always faster.

       I-node numbers for ``.'' and ``..''  in each directory are
       not checked for validity.

       When  fsck  detects an incorrect file size, it prompts you
       to choose whether you want the file truncated or  expanded
       to  match  the number of blocks allocated.  Increasing the
       file size may produce unwanted data at  the  end  of  your
       file; truncating the file may destroy data in the last few
       blocks.

                                                                2

