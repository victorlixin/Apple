

idmknod(1M)                                           idmknod(1M)

SSyynnooppssiiss
       /etc/conf/bin/idmknod [-o device-dir] [-r config-dir] [[-M
       module-name] ...]
            [-s] [-d sdev] [-#]

DDeessccrriippttiioonn
       One of the Installable Driver/Tunable Parameters  configu-
       ration  tools, idmknod reconstructs nodes (block and char-
       acter special device files) in /dev  and  its  subdirecto-
       ries,  based on the files for currently configured modules
       (those with at least one Y in their files) for  entry-type
       0  drivers (those with b or c in the characteristics field
       of their files.  Any nodes with major numbers  correspond-
       ing  to  drivers  with a K flag set in the characteristics
       fields of their Master file are left unchanged.  All other
       nodes  will  be  removed  or  created as needed to exactly
       match the configured Node files.

       Any needed subdirectories are created automatically.  Sub-
       directories  that become empty as a result of node removal
       are removed, also.

       All other files  in  the  /dev  directory  tree  are  left
       unchanged, including symbolic links.

   OOppttiioonnss
       idmknod  takes the following options: Install nodes in (or
       remove them from) the directory specified rather than  the
       default,  /dev.   Use  the directory specified, instead of
       /etc/conf, as the root of the configuration data  directo-
       ries.   Suppress removing nodes; just add new nodes.  Make
       new nodes in /dev, as specified in the node file  for  the
       specified  loadable  kernel  module.   Use  the  sdev file
       instead of /etc/conf/cf.d/sdevice for  current  configura-
       tion information.  Print debugging information.

   EExxiitt ccooddeess
       An  exit  value of zero indicates success.  If an error is
       encountered due to a syntax or  format  error  in  a  node
       entry,  an  advisory  message is printed to stdout and the
       command  execution  continues.   If  a  serious  error  is
       encountered  (for  example,  a  required  file  cannot  be
       found), idmknod exits with a non-zero value and reports an
       error message.

UUssaaggee
       On  the next system reboot after a kernel reconfiguration,
       in sysinit state, the idmknod command is run automatically
       (by  idmkenv)  to  establish the correct representation of
       device nodes in the /dev directory tree  for  the  running
       kernel.   Also,  idmknod (with the -M option) is called by
       idbuild  when  loadable  kernel  module  configuration  is
       requested.   idmknod  can be executed as a user level com-
       mand to test modification of the /dev directory  before  a

                                                                1

idmknod(1M)                                           idmknod(1M)

       Driver  Software  Package (DSP) is built.  It is useful in
       installation scripts that do not reconfigure  the  kernel,
       but that need to create /dev entries.

RReeffeerreenncceess

                                                                2

