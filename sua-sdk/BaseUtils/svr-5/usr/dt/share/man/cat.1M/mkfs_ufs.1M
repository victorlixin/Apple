

mkfs_ufs(1M)                                         mkfs_ufs(1M)

SSyynnooppssiiss
       mkfs [-F ufs] [generic_options] special

       mkfs [-F ufs] [generic_options] [-o specific_options] spe-
       cial size

DDeessccrriippttiioonn
       generic_options are options supported by the generic  mkfs
       command.

       mkfs  constructs  a  file system by writing on the special
       file special unless the `-o N' flag  has  been  specified.
       The  numeric size specifies the number of logical 512 byte
       sectors in the file system.  mkfs  builds  a  file  system
       with a root directory and a lost+found directory (see

       The options are:

       Specifies  the  ufs-FSType.   Specify ufs file system-spe-
       cific options.  These options  can  be  specified  in  any
       order,  but  must  be  separated by commas.  The following
       options are available: Do not write the file system to the
       special  file.   This  suboption gives all the information
       needed to create a file system but  does  not  create  it.
       The  number of sectors per track on the disk.  The default
       is 18.  The number of tracks per  cylinder  on  the  disk.
       The default is 9.  The primary block size for files on the
       file system.   It  must  be  a  power  of  two,  currently
       selected  from  4096  (the default) or 8192.  The fragment
       size for files on the file system.   The  fragsize  repre-
       sents the smallest amount of disk space that will be allo-
       cated to a file.  It must be  a  power  of  two  currently
       selected from the range 512 to 8192.  The default is 1024.
       The number of disk cylinders per cylinder group.   n  must
       be  in  the range 1 to 32.  cgsize has different defaults,
       depending on the size  of  the  cylinder  group.   If  the
       cylinder group is less than 3/4 MB, cgsize defaults to 16.
       If the cylinder group is between 3/4 and  1.5  MB,  cgsize
       defaults to 12.  If the cylinder group is greater than 1.5
       MB, cgsize defaults to 8.  The number of bytes  for  which
       one  inode  block is allocated.  The default currently set
       at one inode block for every 2048 bytes.  The minimum per-
       centage  of free disk space allowed.  Once the file system
       capacity reaches this threshold, only a privileged user is
       allowed  to  allocate  disk  blocks.  The default value is
       10%.  It is inadvisable to reduce the allocation  of  free
       space  below  the default level because this may adversely
       affect performance.  free also determines when a  filesys-
       tem  will  automatically  switch between time optimization
       and space optimization.  The rotational speed of the disk,
       in  revolutions  per second.  The default is 60.  Space or
       time optimization preference; s specifies optimization for
       space,  t specifies optimization for time.  The default is
       t.  The number of alternates per  cylinder  (SCSI  devices

                                                                1

mkfs_ufs(1M)                                         mkfs_ufs(1M)

       only).  The default is 0.  The expected time (in millisec-
       onds) to service a transfer completion interrupt and  ini-
       tiate  a  new  transfer  on  the same disk.  It is used to
       decide how much rotational spacing to place  between  suc-
       cessive  blocks in a file.  The default is 4.  Some appli-
       cations that pre-date SVR4 do not  work  on  file  systems
       with  more than 64K inodes.  Therefore, when the number of
       inodes for the file system being  built  exceeds  the  64K
       limit,  mkfs  prompts  the  user to confirm that he or she
       indeed wants the large number of inodes.  The -o C  option
       silences  this mkfs prompt and limits the number of inodes
       to a maximum of 64K, ensuring perfect binary compatibility
       with the pre-Release 4
        System.   When  the  number of inodes for the file system
       being built exceeds the 64K limit, mkfs prompts  the  user
       to confirm that he or she indeed wants the large number of
       inodes.  The -o L option silences this prompt  and  allows
       the  user  to  create  a  file  system  with more than 64K
       inodes.  mkfs constructs a file system by writing  on  the
       special file.  Specify the number of logical 512 byte sec-
       tors in the file system. The largest file system size is a
       maximum of 4,194,304 512-byte sectors (2 gigabytes).

NNoottiicceess
       The  number  of  inodes is calculated as a function of the
       file system size,  but  can  be  modified  with  the  nbpi
       option.   For  those  who  want a file system suitable for
       lots of tiny files (smaller  than  one  block),  the  nbpi
       parameter may be used to increase the number of inodes.

       You  should  keep a note of spare superblock copies in the
       ufs file system, so that in the event of  superblock  cor-
       ruption, you will know which blocks contain spare entries.

RReeffeerreenncceess

                                                                2

