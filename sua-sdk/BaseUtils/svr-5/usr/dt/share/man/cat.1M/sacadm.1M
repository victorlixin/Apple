

sacadm(1M)                                             sacadm(1M)

SSyynnooppssiiss
       sacadm  -a  -p  pmtag  -t  type  -c cmd -v ver [-f dx] [-n
       count]
            [-y "comment"] [-z script] sacadm -r -p pmtag
       sacadm -s -p pmtag
       sacadm -k -p pmtag
       sacadm -e -p pmtag
       sacadm -d -p pmtag
       sacadm -l [-p pmtag | -t type]
       sacadm -L [-p pmtag | -t type]
       sacadm -g -p pmtag [-z script]
       sacadm -G [-z script]
       sacadm -x [-p pmtag]

DDeessccrriippttiioonn
       sacadm is the administrative command for the  upper  level
       of  the  Service  Access  Facility hierarchy, that is, for
       port monitor administration.  sacadm performs the  follow-
       ing  functions:  adds  or removes a port monitor starts or
       stops a port monitor enables or disables  a  port  monitor
       installs  or  replaces  a  per-system configuration script
       installs or  replaces  a  per-port  monitor  configuration
       script  prints requested port monitor information Any user
       on the system may invoke sacadm to  request  port  monitor
       status  (-l and -L) and to print per-port monitor and per-
       system configuration scripts (-g and  -G  without  the  -z
       option).

       The  options have the following meanings: Add a port moni-
       tor.  When adding a port monitor, sacadm creates the  sup-
       porting  directory  structure in /etc/saf and /var/saf and
       adds   an   entry   for   the   new   port   monitor    to
       /etc/saf/_sactab.   The file _sactab already exists on the
       delivered system.  Initially, it is  empty  except  for  a
       single line, which contains the version number of the Ser-
       vice Access Controller.

       Unless the command line that adds  the  new  port  monitor
       includes  a  -f  option  with the argument x, the new port
       monitor will be started.  Because of the complexity of the
       options and arguments that follow the -a option, it may be
       more convenient to use a command script to add port  moni-
       tors.   The command (cmd) to execute when the port monitor
       is started.  If the command includes arguments, the string
       must  be  enclosed  with double quote characters.  Disable
       the port monitor pmtag.  Enable the  port  monitor  pmtag.
       The  -f  option specifies one or both of the following two
       flags which are then included in the flags  field  of  the
       _sactab  entry for the new port monitor.  If the -f option
       is not included on the command line, no flags are set  and
       the  default conditions prevail.  By default, a port moni-
       tor is started and enabled.  A -f option with no following
       argument  is illegal.  Do not enable the new port monitor.
       Do not start the new port monitor.  The -g option is  used

                                                                1

sacadm(1M)                                             sacadm(1M)

       to  request  output  or to install or replace the per-port
       monitor configuration script  /etc/saf/pmtag/_config.   -g
       requires a -p option.  The -g option with only a -p option
       prints the per-port monitor configuration script for  port
       monitor  pmtag.   The  -g option with a -p option and a -z
       option installs the file script as  the  per-port  monitor
       configuration script for port monitor pmtag.  Other combi-
       nations of options with -g are invalid.  The -G option  is
       used  to  request output or to install or replace the per-
       system configuration script /etc/saf/_sysconfig.   The  -G
       option  by  itself  prints  the  per-system  configuration
       script.  The -G option in combination  with  a  -z  option
       installs  the  file script as the per-system configuration
       script.  Other combinations of options with  a  -G  option
       are  invalid.   Stop port monitor pmtag.  The -l option is
       used to request  port  monitor  information.   The  -l  by
       itself  lists  all  port  monitors  on the system.  The -l
       option in combination with the -p option  lists  only  the
       port monitor specified by pmtag.  A -l in combination with
       the -t option lists all port monitors of type  type.   Any
       other  combination  of  options  with  the  -l  option  is
       invalid.  The -L option is  identical  to  the  -l  option
       except that the output appears in a condensed format.
       Set the restart count to count.  If a restart count is not
       specified, count is set to zero.  A count  of  zero  indi-
       cates  that  the port monitor is not to be restarted if it
       fails.  Specifies the tag associated with a port  monitor.
       Remove  port monitor pmtag.  sacadm removes the port moni-
       tor entry from /etc/saf/_sactab.  If the removed port mon-
       itor  is not running, then no further action is taken.  If
       the removed port monitor is running,  the  Service  Access
       Controller  (SAC)  sends  it  SIGTERM  to indicate that it
       should shut down.  Note that the port monitor's  directory
       structure  remains intact.  Start a port monitor.  The SAC
       starts the port monitor pmtag.  Specifies the port monitor
       type.   Specifies  the version number of the port monitor.
       This version number may be given as -v `pmspec  -V`  where
       pmspec is the special administrative command for port mon-
       itor pmtag.  This special command is ttyadm for ttymon and
       nlsadmin  for listen.  The version stamp of the port moni-
       tor is known by the command and is returned when pmspec is
       invoked  with  a -V option.  The -x option by itself tells
       the SAC to read  its  database  file  (_sactab).   The  -x
       option with the -p option tells port monitor pmtag to read
       its administrative file.  Include comment in  the  _sactab
       entry  for  port  monitor  pmtag.  Used with the -g and -G
       options to specify the name of a file that contains a con-
       figuration  script.   With the -g option, script is a per-
       port monitor configuration script; with -G it  is  a  per-
       system configuration script.  The -z option overwrites the
       existing script.  It is suggested that you do the  follow-
       ing  three  steps  when you modify/replace a configuration
       script.  First a copy of the  existing  script  should  be
       made  (-g  or  -G).   Then  the  copy  should  be  edited.

                                                                2

sacadm(1M)                                             sacadm(1M)

       Finally, the copy is put in place over the existing script
       (-g or -G with -z).

FFiilleess
       /etc/saf/_sactab  /etc/saf/_sysconfig /etc/saf/pmtag/_con-
       fig

UUssaaggee
       Options that request information will write  the  informa-
       tion  on  the  standard  output.   In the condensed format
       (-L), port monitor information is printed as a sequence of
       colon-separated  fields; empty fields are indicated by two
       successive colons.  The  standard  format  (-l)  prints  a
       header  identifying the columns, and port monitor informa-
       tion is aligned under the appropriate headings.   In  this
       format, an empty field is indicated by a hyphen.  The com-
       ment character is #.

EExxiitt ccooddeess
       If successful, sacadm will exit with a status of zero.  If
       sacadm  fails  for any reason, it will exit with a nonzero
       status.

RReeffeerreenncceess
EExxaammpplleess
       The following command line adds a port monitor.  The  port
       monitor  tag  is tcp; its type is listen; if necessary, it
       will restart three times before failing;  its  administra-
       tive  command is nlsadmin; and the configuration script to
       be read is in the file script: sacadm -a -p tcp -t  listen
       -c "/usr/lib/saf/listen -m inet/tcp tcp" \
            -v `nlsadmin -V` -n 3 -z script Remove a port monitor
       whose tag is pmtag: sacadm -r -p pmtag Start the port mon-
       itor  whose tag is pmtag: sacadm -s -p pmtag Stop the port
       monitor whose tag is pmtag: sacadm -k -p pmtag Enable  the
       port  monitor  whose tag is pmtag: sacadm -e -p pmtag Dis-
       able the port monitor whose tag is  pmtag:  sacadm  -d  -p
       pmtag  List  status  information  for  all  port monitors:
       sacadm -l List status information  for  the  port  monitor
       whose  tag  is  pmtag:  sacadm  -l  -p pmtag List the same
       information in condensed format: sacadm -L -p  pmtag  List
       status  information  for  all  port monitors whose type is
       listen: sacadm -l -t listen Replace the  per-port  monitor
       configuration  script  associated  with  the  port monitor
       whose tag is pmtag with the contents of the file file.con-
       fig: sacadm -g -p pmtag -z file.config

                                                                3

